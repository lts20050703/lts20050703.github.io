import{f as b,a as o,c as U,t as He}from"../chunks/BAhx-X9G.js";import{p as Ee,d as u,e as N,u as oe,b as ne,i as s,g as e,f as I,s as a,t as g,a as Je,c as n,r as i}from"../chunks/DpYMcOls.js";import{d as Ne,s as d,e as ce}from"../chunks/DO8qiAfh.js";import{i as F}from"../chunks/A2GgpgHd.js";import{e as ve,i as Fe}from"../chunks/CelAGHVR.js";import{n as V,v as pe,d as Pe,r as C,s as W,a as Xe}from"../chunks/BaETQRMq.js";import{s as $e}from"../chunks/Bk5HspoW.js";import{s as fe}from"../chunks/FvL_ARqq.js";import{a as ue,b as de}from"../chunks/qtjqsBgj.js";import{p as qe}from"../chunks/BWxz1Wsv.js";import{H as Be}from"../chunks/D8CBjT4n.js";import{L as De}from"../chunks/DKergPPz.js";import{t as Y,T as Ge}from"../chunks/CSkIyDrm.js";var Ke=b(" <br/> ",1),Me=b('<input type="text" class="input h-7 p-1 input-info" readonly=""/>'),Qe=b('<input type="text"/>'),Re=b('<div class="pointer-events-none fixed top-0 m-1 flex w-full items-center justify-center"><div class="pointer-events-auto flex flex-col items-center gap-4 rounded-2xl bg-base-100 p-1 sm:flex-row sm:rounded-full"><div class="flex flex-row items-center gap-1"> <input type="checkbox" class="toggle toggle-primary"/></div> <div class="flex flex-row items-center gap-1"> <input type="checkbox" class="toggle toggle-primary"/></div></div></div> <div class="m-1 mt-4 flex flex-col items-center justify-center gap-4"><div class="flex flex-col items-center justify-center gap-1"><div class="text-center text-2xl font-bold"> </div> <a class="link link-primary underline-offset-8">Source</a></div> <button class="btn btn-sm btn-error">Clear Inputs</button> <div class="w-5xl max-w-full leading-loose"></div></div> <!> <!>',1),Ue=b('<a class="link text-center text-3xl leading-relaxed link-primary underline-offset-8" data-sveltekit-reload=""> </a>'),Ve=b('<div class="mt-4 flex flex-col items-center justify-center gap-4"><div class="text-3xl">Custom TXT Files</div> <input class="input input-primary" type="text" placeholder="Link to the txt file..."/> <a class="link text-3xl link-primary underline-offset-8" data-sveltekit-reload="">Load</a> <hr class="my-4 w-sm max-w-full opacity-25"/> <div class="text-3xl">Examples</div> <div class="flex flex-col items-center justify-center gap-4"></div></div>'),We=b('<!> <div class="text-center text-2xl font-bold"> </div> <div class="text-center"> </div> <!>',1);function pt(me,Z){Ee(Z,!0);let P=!1,m=u(null),k=u(N([])),h=u(N([])),w=u(!1),X=u(N(V.openclozes)),O=u(!1),H=u("loading"),_=u(N([])),$=u("");oe(()=>{ne(()=>{s(m,qe.url.searchParams.get("link"),!0),s(w,localStorage.getItem("openclozes.live")!==null),e(m)&&fetch(e(m)).then(c=>c.text()).then(c=>{s(k,c.split(`
`),!0),s(X,e(k).shift()??"",!0),s(k,e(k).join(`
`).split(/{|}/),!0),s(h,e(k).filter((r,p)=>p%2===1),!0);const v=localStorage.getItem(`openclozes-${e(m)}`);if(!v){s(H,"loaded"),s(_,Array.from({length:e(h).length},()=>""),!0);return}try{const r=JSON.parse(v);typeof r=="object"&&r&&"inputs"in r&&Array.isArray(r.inputs)&&r.inputs.every(p=>typeof p=="string")&&s(_,r.inputs,!0),s(H,"loaded")}catch{s(H,"error")}Y("Loaded save!","success",3e3)})})}),oe(()=>{localStorage.setItem(`openclozes-${e(m)}`,JSON.stringify({inputs:e(_),version:pe.openclozes})),e(w)?localStorage.setItem("openclozes.live","true"):localStorage.removeItem("openclozes.live"),ne(()=>{P||Y("Autosaved!","success",1e3)})});function _e(){localStorage.removeItem(`openclozes-${e(m)}`),location.reload()}function xe(){setTimeout(()=>{this.selectionStart=this.selectionEnd=this.value.length},0),P=!0}function ge(){P=!1,Y("Autosaved!","success",1e3)}var ee=We(),te=I(ee);Be(te,{get title(){return e(X)},get description(){return`${V.openclozes} - ${Pe.openclozes}`},uri:"openclozes"});var q=a(te,2),he=n(q,!0);i(q);var B=a(q,2),ye=n(B,!0);i(B);var be=a(B,2);{var ke=c=>{var v=Re(),r=I(v),p=n(r),z=n(p),x=n(z),A=a(x);C(A),i(z);var y=a(z,2),E=n(y),ae=a(E);C(ae),i(y),i(p),i(r);var D=a(r,2),G=n(D),K=n(G),ze=n(K,!0);i(K);var Se=a(K,2);i(G);var re=a(G,2);re.__click=()=>{s(_,e(h).map(()=>""),!0)};var se=a(re,2);ve(se,21,()=>e(k),Fe,(L,J,f)=>{var ie=U(),Ie=I(ie);{var Ae=S=>{var T=U(),M=I(T);{var Q=l=>{var t=Ke(),j=I(t),Te=a(j,2);g((Ce,Oe)=>{d(j,`${Ce??""} `),d(Te,` ${Oe??""}`)},[()=>e(J).split(`
`)[0],()=>e(J).split(`
`)[1]]),o(l,t)},R=l=>{var t=He();g(()=>d(t,e(J))),o(l,t)};F(M,l=>{e(J).includes(`
`)?l(Q):l(R,!1)})}o(S,T)},Le=S=>{var T=U(),M=I(T);{var Q=l=>{var t=Me();C(t),g(()=>{fe(t,`width: ${e(h)[(f-1)/2]?.length+2}ch`),Xe(t,e(h)[(f-1)/2])}),o(l,t)},R=l=>{var t=Qe();C(t),g(j=>{$e(t,1,`input h-7 p-1 lowercase ${j??""}`),fe(t,`width: ${e(h)[(f-1)/2]?.length+2}ch`)},[()=>!e(_)[(f-1)/2]||!e(w)?"input-primary":e(_)[(f-1)/2]?.toLowerCase().split(/ +/).join(" ").trim()===e(h)[(f-1)/2]?"input-success":"input-error"]),ce("focus",t,xe),ce("blur",t,ge),de(t,()=>e(_)[(f-1)/2],j=>e(_)[(f-1)/2]=j),o(l,t)};F(M,l=>{e(O)?l(Q):l(R,!1)},!0)}o(S,T)};F(Ie,S=>{f%2===0?S(Ae):S(Le,!1)})}o(L,ie)}),i(se),i(D);var le=a(D,2);Ge(le,{});var je=a(le,2);De(je,{get status(){return e(H)},clear_save:_e}),g(()=>{d(x,`Check: ${e(w)?"On":"Off"} `),d(E,`Answers: ${e(O)?"Show":"Hide"} `),d(ze,e(X)),W(Se,"href",e(m))}),ue(A,()=>e(w),L=>s(w,L)),ue(ae,()=>e(O),L=>s(O,L)),o(c,v)},we=c=>{var v=Ve(),r=a(n(v),2);C(r);var p=a(r,2),z=a(p,6);ve(z,20,()=>Z.data.files,x=>x,(x,A)=>{var y=Ue(),E=n(y,!0);i(y),g(()=>{W(y,"href",`./?link=${A.url??""}`),d(E,A.title)}),o(x,y)}),i(z),i(v),g(()=>W(p,"href",`./?link=${e($)??""}`)),de(r,()=>e($),x=>s($,x)),o(c,v)};F(be,c=>{e(m)?c(ke):c(we,!1)})}g(()=>{d(he,V.openclozes),d(ye,pe.openclozes)}),o(me,ee),Je()}Ne(["click"]);export{pt as component};
