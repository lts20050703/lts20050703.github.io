import"../chunks/DsnmJJEf.js";import{p as Ut,i as qt,u as bt,e as ft,k as d,h as S,f as h,a as O,s,d as i,t as f,g as e,b as _,c as zt,$ as Bt,r as n,l as gt,j as tt,m as Ft}from"../chunks/fRTlKJc5.js";import{d as Gt,h as Ht,s as p,e as Mt}from"../chunks/ChByKK8l.js";import{i as X}from"../chunks/BGNtTwbM.js";import{e as et}from"../chunks/BTnqOMW6.js";import{r as A,s as xt}from"../chunks/BjZBy5iL.js";import{s as I}from"../chunks/CB-vSWM3.js";import{b as rt,a as Pt}from"../chunks/D3jRnHxe.js";import{b as ht}from"../chunks/BX2B2b48.js";import{n as kt,v as Qt}from"../chunks/DVSrS0GQ.js";import{L as Rt}from"../chunks/DDyWFoCF.js";import{t as yt,T as Vt}from"../chunks/brOtyZDp.js";import{o as Wt,a as C,s as Yt,c as Zt,n as te}from"../chunks/DLM6tR0h.js";var ee=(j,o)=>{o.checked[parseInt(o.logs[0])]=!1,o.logs.shift(),o.logs=o.logs},re=h('<div class="text-error"> </div>'),ae=h('<div class="text-success"> </div>'),se=h("<div> </div>"),ne=h('<input class="checkbox-primary checkbox sm:checkbox-lg" type="checkbox"/> <label class="text-xl sm:text-3xl"> </label>',1),ie=h("<div><!></div>"),oe=h("<div> </div>"),le=(j,o)=>{o.checked=[],o.logs=[]},ce=(j,o)=>{o.numbers=[],o.checked=[],o.logs=[]},de=h('<div class="text-center text-2xl font-bold"> </div> <div class="text-center"> </div> <!> <!> <div class="m-1 flex flex-col items-center justify-center gap-1"><label for="input" class="text-3xl">Nhập 5 số</label> <input type="text" inputmode="decimal" class="input input-sm input-primary w-48 max-w-full px-1 pt-0 text-right text-3xl"/> <button>Thêm hàng</button> <div class="flex flex-row gap-1"><label for="number" class="text-3xl">Số</label> <input id="number" type="text" inputmode="numeric" class="input input-sm input-primary w-16 px-1 pt-0 text-right text-3xl"/></div> <div class="flex flex-row gap-1"><button>Thêm</button> <button> </button></div> <!> <div>Danh sách những số đã gọi:</div> <div class="flex flex-row items-center justify-center gap-1"></div> <div> </div> <div class="grid w-full grid-cols-9"></div> <div class="flex flex-row items-center justify-center gap-1"><div class="text-3xl">Kiểm tra</div> <input type="text" inputmode="numeric" class="input input-sm input-primary w-16 px-1 pt-0 text-right text-3xl"/></div> <!> <div class="flex flex-row gap-1"><button class="btn btn-warning btn-sm">Xóa số đã gọi</button> <button class="btn btn-error btn-sm">Xóa hết số</button></div></div>',1);function we(j,o){Ut(o,!0);const $t=Wt({numbers:C(C(te())),checked:C(Zt()),logs:C(Yt())}),r=qt({numbers:[],checked:[],logs:[]});let D=0,U,q,v=S(""),k=S(""),y=S(""),E=S(""),N=S("loading");bt(()=>{ft(()=>{D=2;const t=localStorage.getItem("loto");if(!t)d(N,"loaded");else try{const a=$t.parse(JSON.parse(t));r.numbers=a.numbers,r.checked=a.checked,r.logs=a.logs,d(N,"loaded")}catch{d(N,"error")}yt("Loaded save!","success",3e3)})}),bt(()=>{localStorage.setItem("loto",JSON.stringify(r)),ft(()=>{if(D>0){D-=1;return}yt("Autosaved!","success",1e3)})});function at(t){e(v)===""||t instanceof KeyboardEvent&&t.key!=="Enter"||(r.logs.includes(e(v))?d(E,e(v),!0):(d(E,""),r.logs.unshift(e(v)),r.checked[Number.parseInt(e(v))]=!0),d(v,""),q.focus())}function st(t){e(k)===""||t instanceof KeyboardEvent&&t.key!=="Enter"||(r.numbers.push(e(k).split(",").map(a=>Number.parseInt(a))),d(k,""),U.focus())}function wt(){setTimeout(()=>{this.selectionStart=this.selectionEnd=this.value.length},0)}function St(){localStorage.removeItem("loto"),location.reload()}var nt=de();Ht(t=>{f(()=>Bt.title=kt.loto)});var z=O(nt),It=i(z,!0);n(z);var B=s(z,2),jt=i(B,!0);n(B);var it=s(B,2);Vt(it,{});var ot=s(it,2);Rt(ot,{get status(){return e(N)},clear_save:St});var lt=s(ot,2),$=s(i(lt),2);A($),$.__keydown=st,ht($,t=>U=t,()=>U);var F=s($,2);F.__click=st;var G=s(F,2),w=s(i(G),2);A(w),w.__keydown=at,ht(w,t=>q=t,()=>q),n(G);var H=s(G,2),M=i(H);M.__click=at;var T=s(M,2);T.__click=[ee,r];var Et=i(T);n(T),n(H);var ct=s(H,2);{var Nt=t=>{var a=gt(),l=O(a);{var g=u=>{var b=re(),K=i(b);n(b),f(()=>p(K,`Số ${e(E)??""} đã được thêm vào trước đó!`)),_(u,b)},x=u=>{var b=ae(),K=i(b);n(b),f(()=>p(K,`Đã thêm số ${r.logs[0]??""}!`)),_(u,b)};X(l,u=>{e(E)?u(g):u(x,!1)})}_(t,a)};X(ct,t=>{r.logs[0]&&t(Nt)})}var P=s(ct,4);et(P,20,()=>r.logs,t=>t,(t,a)=>{var l=se(),g=i(l,!0);n(l),f(()=>p(g,a)),_(t,l)}),n(P);var Q=s(P,2),Tt=i(Q);n(Q);var R=s(Q,2);et(R,20,()=>r.numbers,t=>t,(t,a)=>{var l=gt(),g=O(l);et(g,16,()=>[[1,9],[10,19],[20,29],[30,39],[40,49],[50,59],[60,69],[70,79],[80,90]],([x,u])=>x,(x,u,b,K)=>{var _t=tt(()=>Ft(u,2));let Jt=()=>e(_t)[0],Ot=()=>e(_t)[1];const m=tt(()=>a.find(c=>Jt()<=c&&c<=Ot())),W=tt(()=>a.filter(c=>r.checked[c]).length);var L=ie(),Xt=i(L);{var At=c=>{var pt=ne(),J=O(pt);A(J);var Y=s(J,2),Ct=i(Y,!0);n(Y),f((Z,Dt)=>{xt(J,"id",Z),xt(Y,"for",Dt),p(Ct,e(m))},[()=>e(m).toString(),()=>e(m).toString()]),Pt(J,()=>r.checked[e(m)],Z=>r.checked[e(m)]=Z),_(c,pt)};X(Xt,c=>{e(m)&&c(At)})}n(L),f(c=>I(L,1,`flex flex-col items-center justify-center gap-1 p-1 md:flex-row ${c??""} ${e(m)!==void 0?e(W)===5?"bg-primary":r.checked[e(m)]?"":e(W)===4?"bg-yellow-500":e(W)===3?"bg-opacity-50 bg-yellow-500":"":""}`),[()=>parseInt(r.logs[0])===e(m)?"border-primary border":"border-base-100 border"]),_(x,L)}),_(t,l)}),n(R);var V=s(R,2),dt=s(i(V),2);A(dt),n(V);var vt=s(V,2);{var Kt=t=>{var a=oe(),l=i(a);n(a),f((g,x)=>{I(a,1,`rounded p-1 text-3xl ${g??""} text-black`),p(l,`${x??""}
			${e(y)??""}`)},[()=>r.checked[parseInt(e(y))]?"bg-success":"bg-error",()=>r.checked[parseInt(e(y))]?"Có":"Không có"]),_(t,a)};X(vt,t=>{e(y)&&t(Kt)})}var ut=s(vt,2),mt=i(ut);mt.__click=[le,r];var Lt=s(mt,2);Lt.__click=[ce,r],n(ut),n(lt),f(t=>{p(It,kt.loto),p(jt,Qt.loto),I(F,1,`btn btn-primary btn-sm ${e(k)===""?"btn-disabled":""}`),I(M,1,`btn btn-primary btn-sm ${e(v)===""?"btn-disabled":""}`),I(T,1,`btn btn-error btn-sm ${r.logs[0]?"":"btn-disabled"}`),p(Et,`Undo ${r.logs[0]??""??""}`),p(Tt,`cơ hội thắng: ${t??""}%`)},[()=>100*r.numbers.map(t=>(1/(90-r.numbers.map(a=>a.filter(l=>r.checked[l])).flat().length))**(5-t.filter(a=>r.checked[a]).length)).reduce((t,a)=>t+a,0)]),rt($,()=>e(k),t=>d(k,t)),Mt("focus",w,wt),rt(w,()=>e(v),t=>d(v,t)),rt(dt,()=>e(y),t=>d(y,t)),_(j,nt),zt()}Gt(["keydown","click"]);export{we as component};
