import{d as He,f as b,a as o,s as f,c as U,t as Ee,e as oe}from"../chunks/CvMGA4kx.js";import{p as Je,d,e as N,u as ne,b as ce,i as r,g as e,f as I,s as a,t as g,a as Ne,c as n,r as i}from"../chunks/CFdZUXEq.js";import{i as F}from"../chunks/BuzIUImT.js";import{e as ve,i as Fe}from"../chunks/BqNXq7S8.js";import{n as V,v as ue,d as Pe,r as C,s as W,c as pe,b as Xe,a as $e}from"../chunks/DarGZ4lb.js";import{a as fe,b as de}from"../chunks/YtrRdRBi.js";import{p as qe}from"../chunks/CU4eJjIC.js";import{H as Be}from"../chunks/Z_kiVScl.js";import{L as De}from"../chunks/COXjYyv5.js";import{t as Y,T as Ge}from"../chunks/RPfeOJlG.js";var Ke=b(" <br/> ",1),Me=b('<input type="text" class="input h-7 p-1 input-info" readonly=""/>'),Qe=b('<input type="text"/>'),Re=b('<div class="pointer-events-none fixed top-0 m-1 flex w-full items-center justify-center"><div class="pointer-events-auto flex flex-col items-center gap-4 rounded-2xl bg-base-100 p-1 sm:flex-row sm:rounded-full"><div class="flex flex-row items-center gap-1"> <input type="checkbox" class="toggle toggle-primary"/></div> <div class="flex flex-row items-center gap-1"> <input type="checkbox" class="toggle toggle-primary"/></div></div></div> <div class="m-1 mt-4 flex flex-col items-center justify-center gap-4"><div class="flex flex-col items-center justify-center gap-1"><div class="text-center text-2xl font-bold"> </div> <a class="link link-primary underline-offset-8">Source</a></div> <button class="btn btn-sm btn-error">Clear Inputs</button> <div class="w-5xl max-w-full leading-loose"></div></div> <!> <!>',1),Ue=b('<a class="link text-center text-3xl leading-relaxed link-primary underline-offset-8" data-sveltekit-reload=""> </a>'),Ve=b('<div class="mt-4 flex flex-col items-center justify-center gap-4"><div class="text-3xl">Custom TXT Files</div> <input class="input input-primary" type="text" placeholder="Link to the txt file..."/> <a class="link text-3xl link-primary underline-offset-8" data-sveltekit-reload="">Load</a> <hr class="my-4 w-sm max-w-full opacity-25"/> <div class="text-3xl">Examples</div> <div class="flex flex-col items-center justify-center gap-4"></div></div>'),We=b('<!> <div class="text-center text-2xl font-bold"> </div> <div class="text-center"> </div> <!>',1);function nt(me,Z){Je(Z,!0);let P=!1,m=d(null),k=d(N([])),h=d(N([])),w=d(!1),X=d(N(V.openclozes)),O=d(!1),H=d("loading"),_=d(N([])),$=d("");ne(()=>{ce(()=>{r(m,qe.url.searchParams.get("link"),!0),r(w,localStorage.getItem("openclozes.live")!==null),e(m)&&fetch(e(m)).then(c=>c.text()).then(c=>{r(k,c.split(`
`),!0),r(X,e(k).shift()??"",!0),r(k,e(k).join(`
`).split(/{|}/),!0),r(h,e(k).filter((s,u)=>u%2===1),!0);const v=localStorage.getItem(`openclozes-${e(m)}`);if(!v){r(H,"loaded"),r(_,Array.from({length:e(h).length},()=>""),!0);return}try{const s=JSON.parse(v);typeof s=="object"&&s&&"inputs"in s&&Array.isArray(s.inputs)&&s.inputs.every(u=>typeof u=="string")&&r(_,s.inputs,!0),r(H,"loaded")}catch{r(H,"error")}Y("Loaded save!","success",3e3)})})}),ne(()=>{localStorage.setItem(`openclozes-${e(m)}`,JSON.stringify({inputs:e(_),version:ue.openclozes})),e(w)?localStorage.setItem("openclozes.live","true"):localStorage.removeItem("openclozes.live"),ce(()=>{P||Y("Autosaved!","success",1e3)})});function _e(){localStorage.removeItem(`openclozes-${e(m)}`),location.reload()}function xe(){setTimeout(()=>{this.selectionStart=this.selectionEnd=this.value.length},0),P=!0}function ge(){P=!1,Y("Autosaved!","success",1e3)}var ee=We(),te=I(ee);Be(te,{get title(){return e(X)},get description(){return`${V.openclozes} - ${Pe.openclozes}`},uri:"openclozes"});var q=a(te,2),he=n(q,!0);i(q);var B=a(q,2),ye=n(B,!0);i(B);var be=a(B,2);{var ke=c=>{var v=Re(),s=I(v),u=n(s),z=n(u),x=n(z),A=a(x);C(A),i(z);var y=a(z,2),E=n(y),ae=a(E);C(ae),i(y),i(u),i(s);var D=a(s,2),G=n(D),K=n(G),ze=n(K,!0);i(K);var Se=a(K,2);i(G);var se=a(G,2);se.__click=()=>{r(_,e(h).map(()=>""),!0)};var re=a(se,2);ve(re,21,()=>e(k),Fe,(L,J,p)=>{var ie=U(),Ie=I(ie);{var Ae=S=>{var T=U(),M=I(T);{var Q=l=>{var t=Ke(),j=I(t),Te=a(j,2);g((Ce,Oe)=>{f(j,`${Ce??""} `),f(Te,` ${Oe??""}`)},[()=>e(J).split(`
`)[0],()=>e(J).split(`
`)[1]]),o(l,t)},R=l=>{var t=Ee();g(()=>f(t,e(J))),o(l,t)};F(M,l=>{e(J).includes(`
`)?l(Q):l(R,!1)})}o(S,T)},Le=S=>{var T=U(),M=I(T);{var Q=l=>{var t=Me();C(t),g(()=>{pe(t,`width: ${e(h)[(p-1)/2]?.length+2}ch`),Xe(t,e(h)[(p-1)/2])}),o(l,t)},R=l=>{var t=Qe();C(t),g(j=>{$e(t,1,`input h-7 p-1 lowercase ${j??""}`),pe(t,`width: ${e(h)[(p-1)/2]?.length+2}ch`)},[()=>!e(_)[(p-1)/2]||!e(w)?"input-primary":e(_)[(p-1)/2]?.toLowerCase().split(/ +/).join(" ").trim()===e(h)[(p-1)/2]?"input-success":"input-error"]),oe("focus",t,xe),oe("blur",t,ge),de(t,()=>e(_)[(p-1)/2],j=>e(_)[(p-1)/2]=j),o(l,t)};F(M,l=>{e(O)?l(Q):l(R,!1)},!0)}o(S,T)};F(Ie,S=>{p%2===0?S(Ae):S(Le,!1)})}o(L,ie)}),i(re),i(D);var le=a(D,2);Ge(le);var je=a(le,2);De(je,{get status(){return e(H)},clear_save:_e}),g(()=>{f(x,`Check: ${e(w)?"On":"Off"} `),f(E,`Answers: ${e(O)?"Show":"Hide"} `),f(ze,e(X)),W(Se,"href",e(m))}),fe(A,()=>e(w),L=>r(w,L)),fe(ae,()=>e(O),L=>r(O,L)),o(c,v)},we=c=>{var v=Ve(),s=a(n(v),2);C(s);var u=a(s,2),z=a(u,6);ve(z,20,()=>Z.data.files,x=>x,(x,A)=>{var y=Ue(),E=n(y,!0);i(y),g(()=>{W(y,"href",`./?link=${A.url??""}`),f(E,A.title)}),o(x,y)}),i(z),i(v),g(()=>W(u,"href",`./?link=${e($)??""}`)),de(s,()=>e($),x=>r($,x)),o(c,v)};F(be,c=>{e(m)?c(ke):c(we,!1)})}g(()=>{f(he,V.openclozes),f(ye,ue.openclozes)}),o(me,ee),Ne()}He(["click"]);export{nt as component};
