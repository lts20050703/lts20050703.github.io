import"../chunks/DsnmJJEf.js";import{f as I,a as w,d as i,r as s,s as t,M as $e,t as M,b as _,l as te,g as a,p as fe,j as ae,c as pe,u as le,e as ce,k as W,h as ne,$ as Le}from"../chunks/fRTlKJc5.js";import{d as oe,s as u,e as de,h as Oe}from"../chunks/ChByKK8l.js";import{i as P}from"../chunks/BGNtTwbM.js";import{r as re,s as Q}from"../chunks/BjZBy5iL.js";import{a as De,b as Ee,c as ve}from"../chunks/D3jRnHxe.js";import{n as _e,v as Ie}from"../chunks/DVSrS0GQ.js";import{L as Se}from"../chunks/DDyWFoCF.js";import{t as ze,T as He}from"../chunks/brOtyZDp.js";import{i as l,r as be,s as e,m as ge,k as ye,n as xe,b as he,d as we,f as Me,h as Ne,x as Te,l as Ge,g as Ze,a as qe,e as Be,p as Ce,c as Fe,j as ue}from"../chunks/Dh8C38t6.js";import{N as Je,D as Ke}from"../chunks/BY8Hnk0J.js";import{e as ke}from"../chunks/BTnqOMW6.js";import{a as me,d as Pe,f as Qe,b as Re}from"../chunks/BBZ_rXgf.js";import{c as Ue,s as se}from"../chunks/CB-vSWM3.js";import{a as Ve}from"../chunks/BzEYSeOJ.js";import"../chunks/7hhEZefk.js";const We=m=>{var f=et(),y=w(f);y.__click=[Ye];var $=i(y,!0);s(y);var b=t(y,2),n=i(b),L=i(n,!0);s(n);var J=t(n,2);Xe(J,()=>k=>ge.includes(k)||ye.includes(k)),s(b),M(()=>{u($,l.add_all_roles),u(L,l.msn25)}),_(m,f)},Xe=(m,f=$e)=>{var y=te(),$=w(y);ke($,1,()=>be,b=>b,(b,n)=>{var L=te(),J=w(L);{var k=S=>{var K=tt(),j=w(K),X=i(j,!0);s(j);var x=t(j,2);re(x);var N=t(x,2),R=i(N,!0);s(N),M((T,O,U)=>{se(j,1,`text-right ${T??""}`),Q(j,"for",a(n)),u(X,l.role_names[a(n)]),x.disabled=a(n)==="villager"||a(n)==="werewolf",Q(x,"id",a(n)),se(N,1,O),Q(N,"for",a(n)),u(R,U)},[()=>e.roles.includes(a(n))?"text-primary":"",()=>Ue(e.roles.includes(a(n))?"text-primary/50":"text-base-content/50"),()=>a(n).replaceAll("_"," ").replaceAll("25","").replaceAll("24","")]),De(x,()=>e.roles.includes(a(n)),T=>{if(T&&!e.roles.includes(a(n)))e.roles.push(a(n));else if(!T&&e.roles.includes(a(n))){const O=e.roles.indexOf(a(n));O>-1&&e.roles.splice(O,1)}}),_(S,K)};P(J,S=>{f()(a(n))&&S(k)})}_(b,L)}),_(m,y)};var Ye=()=>{for(const m of be){if(e.roles.includes(m))continue;(ge.includes(m)||ye.includes(m))&&e.roles.push(m)}},et=I('<button class="btn btn-primary btn-sm"> </button> <div class="grid grid-cols-[1fr_auto_1fr] items-center justify-center gap-x-2 gap-y-1"><div class="col-span-3 mt-4 text-center text-lg font-bold"> </div> <!></div>',1),tt=I('<label> </label> <input class="toggle toggle-primary" type="checkbox"/> <label> </label>',1);oe(["click"]);var at=I('<div class="col-span-full grid grid-cols-subgrid gap-1"><div class="h-6 w-6"><!></div> <input type="text"/> <button class="btn btn-error btn-sm px-1"><!></button></div>'),rt=I('<div class="border-primary grid grid-cols-[auto_1fr_auto] items-center justify-center gap-1 rounded border p-1"><div></div> <div class="text-center"> </div> <div></div> <section class="col-span-full grid grid-cols-subgrid gap-1"></section></div>'),st=I('<button class="btn btn-error btn-sm"> </button> <hr class="my-2 w-full opacity-25"/> <div> </div> <!> <hr class="my-2 w-full opacity-25"/> <!> <hr class="my-2 w-full opacity-25"/> <div class="text-center text-3xl"> </div> <!> <!> <button class="btn btn-primary"> </button>',1);function it(m,f){fe(f,!0);const y=300,$=ae(()=>e.players.some(h=>e.players.some(Z=>h.id!==Z.id&&h.name===Z.name))),b=ae(()=>e.players.some(h=>!h.name));var n=st(),L=w(n);L.__click=function(...h){xe?.apply(this,h)};var J=i(L,!0);s(L);var k=t(L,4),S=i(k,!0);s(k);var K=t(k,2);he(K);var j=t(K,4);{var X=h=>{var Z=rt(),Y=t(i(Z),2),o=i(Y,!0);s(Y);var r=t(Y,4);ke(r,31,()=>e.players,c=>c.id,(c,D,V)=>{var p=at(),v=i(p),z=i(v);Ne(z),s(v),me(v,d=>Pe?.(d));var A=t(v,2);re(A);var H=t(A,2);H.__click=()=>{const d=e.players.indexOf(a(D));d!==-1&&e.players.splice(d,1)};var E=i(H);Te(E),s(H),s(p),M(d=>{se(A,1,`input input-sm ${d??""}`),Q(A,"placeholder",`${l.player_name??""}...`),H.disabled=e.players.length<=2,Q(H,"aria-label",l.remove_player)},[()=>!a(D).name||e.players.some((d,g)=>g!==a(V)&&d.name===a(D).name)?"input-warning":"input-primary"]),Ee(A,()=>a(D).name,d=>a(D).name=d),Ve(p,()=>Qe,()=>({duration:y})),_(c,p)}),s(r),me(r,(c,D)=>Re?.(c,D),()=>({items:e.players,flipDurationMs:y,transformDraggedElement:c=>{c?.classList.remove("grid-cols-subgrid"),c?.classList.add("grid","grid-cols-[auto_1fr_auto]")}})),s(Z),M(()=>u(o,l.player_name)),de("consider",r,c=>{e.players=c.detail.items}),de("finalize",r,c=>{e.players=c.detail.items}),_(h,Z)};P(j,h=>{e.players.length&&h(X)})}var x=t(j,4),N=i(x,!0);s(x);var R=t(x,2);We(R);var T=t(R,2);we(T);var O=t(T,2);O.__click=()=>{e.time="night",e.night===0?Me():e.current_role?e.time="night":e.time="day"};var U=i(O,!0);s(O),M(()=>{u(J,l.new_game),se(k,1,`text-3xl ${a($)||a(b)?"text-warning":"text-success"}`),u(S,l.players),u(N,l.roles),O.disabled=a($)||a(b),u(U,l.start)}),_(m,n),pe()}oe(["click"]);var nt=(m,f)=>{W(f,!1)},ot=I('<button class="btn btn-sm"> </button> <!> <hr class="my-2 w-full opacity-25"/> <div class="tabs tabs-lift w-full"><input type="radio" name="section" class="tab border-b-0! [--tab-border-color:--color-base-content]"/> <div class="tab-content bg-base-100 border-base-content p-4"><div class="flex flex-col items-center justify-center gap-1"><!> <hr class="my-2 w-full opacity-25"/> <!> <hr class="my-2 w-full opacity-25"/> <!></div></div> <input type="radio" name="section" class="tab border-b-0! [--tab-border-color:--color-base-content]"/> <div class="tab-content bg-base-100 border-base-content p-4"><div class="flex flex-col items-center justify-center gap-1"><!></div></div></div> <!> <!>',1),lt=I("<!> <!>",1),ct=(m,f)=>{W(f,!0)},dt=I('<div class="flex w-full flex-row justify-between"><button class="btn btn-sm"> </button> <button class="btn btn-sm"> </button></div> <!>',1),vt=(m,f)=>{W(f,!0)},_t=I('<div class="flex w-full flex-row justify-between"><button class="btn btn-sm"> </button> <button class="btn btn-sm"> </button></div> <!>',1),ut=I(`<div class="fixed bottom-4 z-50 flex w-full flex-col items-center justify-center gap-1 p-1 text-center"><div>If Link ask you to export save state (or you know how to manually update the save file to the
			latest version), click the link below</div> <a href="/msn/debug/">Go to debug page</a></div>`),mt=I('<div class="text-center text-2xl font-bold"> </div> <div class="text-center"> </div> <div class="m-1 mb-12 flex items-center justify-center"><div class="flex w-full max-w-96 flex-col items-center justify-center gap-1"><!></div></div> <!> <!> <!>',1);function It(m,f){fe(f,!0);const y=[];let $=ne(!1),b=ne("loading"),n=ne("players");const L=ae(()=>e.players.some(o=>e.players.some(r=>o.id!==r.id&&o.name===r.name))),J=ae(()=>e.players.some(o=>!o.name));le(()=>ce(()=>{W(b,Ge(localStorage.getItem("werewolf-moderator")),!0),e.deck=["msn25"],Object.entries(l).forEach(([o,r])=>{typeof r=="string"&&(r.includes(" (25)")||r.includes(" (24)"))&&(l[o]=r.replaceAll(" (25)","").replaceAll(" (24)",""))}),Object.entries(l.role_names).forEach(([o,r])=>{typeof r=="string"&&(r.includes(" (25)")||r.includes(" (24)"))&&(l.role_names[o]=r.replaceAll(" (25)","").replaceAll(" (24)",""))}),Object.entries(l.flags_descriptions).forEach(([o,r])=>{typeof r=="string"&&(r.includes(" (25)")||r.includes(" (24)"))&&(l.flags_descriptions[o]=r.replaceAll(" (25)","").replaceAll(" (24)",""))})})),le(()=>{a(b)==="loaded"&&(localStorage.setItem("werewolf-moderator",Ze(e)),ce(()=>ze("Autosaved!","success",1e3)))});var k=mt();Oe(o=>{M(()=>Le.title=_e.msn)});var S=w(k),K=i(S,!0);s(S);var j=t(S,2),X=i(j,!0);s(j);var x=t(j,2),N=i(x),R=i(N);{var T=o=>{var r=ot(),c=w(r);c.__click=[nt,$];var D=i(c,!0);s(c);var V=t(c,2);qe(V);var p=t(V,4),v=i(p);re(v),v.value=v.__value="players";var z=t(v,2),A=i(z),H=i(A);he(H);var E=t(H,4);Be(E);var d=t(E,4);Ce(d),s(A),s(z);var g=t(z,2);re(g),g.value=g.__value="roles";var G=t(g,2),q=i(G),B=i(q);Fe(B),s(q),s(G),s(p);var C=t(p,2);we(C);var F=t(C,2);ue(F),M(()=>{c.disabled=a(L)||a(J),u(D,l.back),Q(v,"aria-label",l.players),Q(g,"aria-label",l.roles)}),ve(y,[],v,()=>a(n),ee=>W(n,ee)),ve(y,[],g,()=>a(n),ee=>W(n,ee)),_(o,r)},O=o=>{var r=te(),c=w(r);{var D=p=>{var v=lt(),z=w(v);it(z,{});var A=t(z,2);ue(A),_(p,v)},V=p=>{var v=te(),z=w(v);{var A=E=>{var d=dt(),g=w(d),G=i(g);G.__click=()=>{e.time="setup"};var q=i(G,!0);s(G);var B=t(G,2);B.__click=[ct,$];var C=i(B,!0);s(B),s(g);var F=t(g,2);Je(F,{}),M(()=>{u(q,l.setup),u(C,l.advanced_settings)}),_(E,d)},H=E=>{var d=te(),g=w(d);{var G=q=>{var B=_t(),C=w(B),F=i(C);F.__click=()=>{e.time="setup"};var ee=i(F,!0);s(F);var ie=t(F,2);ie.__click=[vt,$];var je=i(ie,!0);s(ie),s(C);var Ae=t(C,2);Ke(Ae,{}),M(()=>{u(ee,l.setup),u(je,l.advanced_settings)}),_(q,B)};P(g,q=>{e.time==="day"&&q(G)},!0)}_(E,d)};P(z,E=>{e.time==="night"?E(A):E(H,!1)},!0)}_(p,v)};P(c,p=>{e.time==="setup"?p(D):p(V,!1)},!0)}_(o,r)};P(R,o=>{a($)?o(T):o(O,!1)})}s(N),s(x);var U=t(x,2);He(U,{});var h=t(U,2);Se(h,{get status(){return a(b)},get clear_save(){return xe}});var Z=t(h,2);{var Y=o=>{var r=ut();_(o,r)};P(Z,o=>{a(b)==="error"&&o(Y)})}M(()=>{u(K,_e.msn),u(X,Ie["werewolf-moderator"])}),_(m,k),pe()}oe(["click"]);export{It as component};
