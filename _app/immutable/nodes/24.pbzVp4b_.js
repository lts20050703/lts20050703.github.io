import"../chunks/DsnmJJEf.js";import{p as fe,f as j,a as k,d as r,r as a,s as e,t as S,g as n,j as X,b as p,c as pe,u as ne,e as le,k as B,h as se,$ as je,l as oe}from"../chunks/fRTlKJc5.js";import{d as be,s as b,e as de,h as Le}from"../chunks/ChByKK8l.js";import{i as q}from"../chunks/BGNtTwbM.js";import{r as ie,s as Y}from"../chunks/BjZBy5iL.js";import{b as De,c as ve}from"../chunks/D3jRnHxe.js";import{n as ce,v as Ae}from"../chunks/DVSrS0GQ.js";import{L as Ie}from"../chunks/DDyWFoCF.js";import{t as Se,T as $e}from"../chunks/brOtyZDp.js";import{n as ge,b as ye,s as t,c as xe,d as we,f as ze,i as _,h as He,x as Ne,l as Te,g as Ee,A as Ge,a as Me,e as Oe,p as Ze,j as _e}from"../chunks/Dh8C38t6.js";import{N as qe,D as Be}from"../chunks/BY8Hnk0J.js";import{e as Ce}from"../chunks/BTnqOMW6.js";import{a as ue,d as Fe,f as Je,b as Ke}from"../chunks/BBZ_rXgf.js";import{s as me}from"../chunks/CB-vSWM3.js";import{a as Pe}from"../chunks/BzEYSeOJ.js";var Qe=j('<div class="col-span-full grid grid-cols-subgrid gap-1"><div class="h-6 w-6"><!></div> <input type="text"/> <button class="btn btn-error btn-sm px-1"><!></button></div>'),Re=j('<div class="border-primary grid grid-cols-[auto_1fr_auto] items-center justify-center gap-1 rounded border p-1"><div></div> <div class="text-center"> </div> <div></div> <section class="col-span-full grid grid-cols-subgrid gap-1"></section></div>'),Ue=j('<button class="btn btn-error btn-sm"> </button> <hr class="my-2 w-full opacity-25"/> <div> </div> <!> <hr class="my-2 w-full opacity-25"/> <!> <hr class="my-2 w-full opacity-25"/> <div class="text-center text-3xl"> </div> <!> <!> <button class="btn btn-primary"> </button>',1);function Ve(E,g){fe(g,!0);const C=300,$=X(()=>t.players.some(u=>t.players.some(y=>u.id!==y.id&&u.name===y.name))),z=X(()=>t.players.some(u=>!u.name));var H=Ue(),G=k(H);G.__click=function(...u){ge?.apply(this,u)};var ee=r(G,!0);a(G);var N=e(G,4),F=r(N,!0);a(N);var Q=e(N,2);ye(Q);var M=e(Q,4);{var te=u=>{var y=Re(),J=e(r(y),2),ae=r(J,!0);a(J);var o=e(J,4);Ce(o,31,()=>t.players,s=>s.id,(s,l,K)=>{var x=Qe(),d=r(x),v=r(d);He(v),a(d),ue(d,i=>Fe?.(i));var c=e(d,2);ie(c);var m=e(c,2);m.__click=()=>{const i=t.players.indexOf(n(l));i!==-1&&t.players.splice(i,1)};var Z=r(m);Ne(Z),a(m),a(x),S(i=>{me(c,1,`input input-sm ${i??""}`),Y(c,"placeholder",`${_.player_name??""}...`),m.disabled=t.players.length<=2,Y(m,"aria-label",_.remove_player)},[()=>!n(l).name||t.players.some((i,w)=>w!==n(K)&&i.name===n(l).name)?"input-warning":"input-primary"]),De(c,()=>n(l).name,i=>n(l).name=i),Pe(x,()=>Je,()=>({duration:C})),p(s,x)}),a(o),ue(o,(s,l)=>Ke?.(s,l),()=>({items:t.players,flipDurationMs:C,transformDraggedElement:s=>{s?.classList.remove("grid-cols-subgrid"),s?.classList.add("grid","grid-cols-[auto_1fr_auto]")}})),a(y),S(()=>b(ae,_.player_name)),de("consider",o,s=>{t.players=s.detail.items}),de("finalize",o,s=>{t.players=s.detail.items}),p(u,y)};q(M,u=>{t.players.length&&u(te)})}var T=e(M,4),R=r(T,!0);a(T);var U=e(T,2);xe(U);var V=e(U,2);we(V);var O=e(V,2);O.__click=()=>{t.time="night",t.night===0?ze():t.current_role?t.time="night":t.time="day"};var W=r(O,!0);a(O),S(()=>{b(ee,_.new_game),me(N,1,`text-3xl ${n($)||n(z)?"text-warning":"text-success"}`),b(F,_.players),b(R,_.roles),O.disabled=n($)||n(z),b(W,_.start)}),p(E,H),pe()}be(["click"]);var We=(E,g)=>{B(g,!1)},Xe=j('<button class="btn btn-sm"> </button> <!> <hr class="my-2 w-full opacity-25"/> <div class="tabs tabs-lift w-full"><input type="radio" name="section" class="tab border-b-0! [--tab-border-color:--color-base-content]"/> <div class="tab-content bg-base-100 border-base-content p-4"><div class="flex flex-col items-center justify-center gap-1"><!> <hr class="my-2 w-full opacity-25"/> <!> <hr class="my-2 w-full opacity-25"/> <!></div></div> <input type="radio" name="section" class="tab border-b-0! [--tab-border-color:--color-base-content]"/> <div class="tab-content bg-base-100 border-base-content p-4"><div class="flex flex-col items-center justify-center gap-1"><!></div></div></div> <!> <!>',1),Ye=j("<!> <!>",1),et=(E,g)=>{B(g,!0)},tt=j('<div class="flex w-full flex-row justify-between"><button class="btn btn-sm"> </button> <button class="btn btn-sm"> </button></div> <!>',1),at=(E,g)=>{B(g,!0)},rt=j('<div class="flex w-full flex-row justify-between"><button class="btn btn-sm"> </button> <button class="btn btn-sm"> </button></div> <!>',1),st=j(`<div class="fixed bottom-4 z-50 flex w-full flex-col items-center justify-center gap-1 p-1 text-center"><div>If Link ask you to export save state (or you know how to manually update the save file to the
			latest version), click the link below</div> <a href="/werewolf-moderator/debug/">Go to debug page</a></div>`),ot=j('<div class="text-center text-2xl font-bold"> </div> <div class="text-center"> </div> <div class="m-1 mb-12 flex items-center justify-center"><div class="flex w-full max-w-96 flex-col items-center justify-center gap-1"><!></div></div> <!> <!> <!> <!>',1);function wt(E,g){fe(g,!0);const C=[];let $=se(!1),z=se("loading"),H=se("players");const G=X(()=>t.players.some(o=>t.players.some(s=>o.id!==s.id&&o.name===s.name))),ee=X(()=>t.players.some(o=>!o.name));ne(()=>le(()=>{B(z,Te(localStorage.getItem("werewolf-moderator")),!0)})),ne(()=>{n(z)==="loaded"&&(localStorage.setItem("werewolf-moderator",Ee(t)),le(()=>Se("Autosaved!","success",1e3)))});var N=ot();Le(o=>{S(()=>je.title=ce["werewolf-moderator"])});var F=k(N),Q=r(F,!0);a(F);var M=e(F,2),te=r(M,!0);a(M);var T=e(M,2),R=r(T),U=r(R);{var V=o=>{var s=Xe(),l=k(s);l.__click=[We,$];var K=r(l,!0);a(l);var x=e(l,2);Me(x);var d=e(x,4),v=r(d);ie(v),v.value=v.__value="players";var c=e(v,2),m=r(c),Z=r(m);ye(Z);var i=e(Z,4);Oe(i);var w=e(i,4);Ze(w),a(m),a(c);var f=e(c,2);ie(f),f.value=f.__value="roles";var h=e(f,2),L=r(h),D=r(L);xe(D),a(L),a(h),a(d);var A=e(d,2);we(A);var I=e(A,2);_e(I),S(()=>{l.disabled=n(G)||n(ee),b(K,_.back),Y(v,"aria-label",_.players),Y(f,"aria-label",_.roles)}),ve(C,[],v,()=>n(H),P=>B(H,P)),ve(C,[],f,()=>n(H),P=>B(H,P)),p(o,s)},O=o=>{var s=oe(),l=k(s);{var K=d=>{var v=Ye(),c=k(v);Ve(c,{});var m=e(c,2);_e(m),p(d,v)},x=d=>{var v=oe(),c=k(v);{var m=i=>{var w=tt(),f=k(w),h=r(f);h.__click=()=>{t.time="setup"};var L=r(h,!0);a(h);var D=e(h,2);D.__click=[et,$];var A=r(D,!0);a(D),a(f);var I=e(f,2);qe(I,{}),S(()=>{b(L,_.setup),b(A,_.advanced_settings)}),p(i,w)},Z=i=>{var w=oe(),f=k(w);{var h=L=>{var D=rt(),A=k(D),I=r(A);I.__click=()=>{t.time="setup"};var P=r(I,!0);a(I);var re=e(I,2);re.__click=[at,$];var he=r(re,!0);a(re),a(A);var ke=e(A,2);Be(ke,{}),S(()=>{b(P,_.setup),b(he,_.advanced_settings)}),p(L,D)};q(f,L=>{t.time==="day"&&L(h)},!0)}p(i,w)};q(c,i=>{t.time==="night"?i(m):i(Z,!1)},!0)}p(d,v)};q(l,d=>{t.time==="setup"?d(K):d(x,!1)},!0)}p(o,s)};q(U,o=>{n($)?o(V):o(O,!1)})}a(R),a(T);var W=e(T,2);$e(W,{});var u=e(W,2);Ge(u,{});var y=e(u,2);Ie(y,{get status(){return n(z)},get clear_save(){return ge}});var J=e(y,2);{var ae=o=>{var s=st();p(o,s)};q(J,o=>{n(z)==="error"&&o(ae)})}S(()=>{b(Q,ce["werewolf-moderator"]),b(te,Ae["werewolf-moderator"])}),p(E,N),pe()}be(["click"]);export{wt as component};
