import{d as At,f as w,a as b,c as st,s as n}from"../chunks/CRRtVwjb.js";import{p as Dt,f as z,s,c as t,i as _,d as E,g as e,t as q,a as It,h as ot,r as a,o as zt,n as Et}from"../chunks/Dh-QpTF3.js";import{i as S}from"../chunks/TWXXjeS0.js";import{d as Ft,n as lt,r as it,v as Ht,s as vt}from"../chunks/D0voXgY6.js";import{s as $t}from"../chunks/DJIhRGty.js";import{b as Bt}from"../chunks/DlWfgR0a.js";import{b as Ct}from"../chunks/C9tYwez2.js";import{H as Kt}from"../chunks/CYHH3WuX.js";import{T as Lt,t as nt}from"../chunks/vJEF-6Cm.js";import{S as Mt,P as Gt,s as J,i as c,a as Jt,b as dt,x as Nt,A as Ot,l as Qt}from"../chunks/DdLchZYB.js";var Rt=w('<div role="alert" class="alert w-full alert-vertical alert-soft text-base alert-error"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div> </div> <div>Please follow the following steps:</div> <ol class="list list-decimal text-left text-base"><li> </li> <li> </li> <li>Send Link the save data</li> <li>Delete the save file</li></ol> <button class="btn btn-primary"> </button></div>'),Ut=w('<span class="loading loading-xl loading-spinner"></span>'),Vt=w('<button class="btn btn-sm"> </button> <div class="flex items-center rounded bg-base-100 p-4"><div class="flex flex-col border p-4"><!></div></div> <hr class="my-2 w-full opacity-25"/> <div class="mt-4 flex flex-col items-center justify-center gap-1"><button class="btn btn-sm btn-primary"> </button> <div class="mt-4 flex flex-row gap-1"><input class="input input-sm input-primary" type="text"/> <button class="btn px-1 btn-sm btn-error"><!></button></div> <button class="btn btn-sm btn-error"> </button></div> <!> <button class="btn btn-sm"> </button>',1),Wt=w('<div class="alert w-full alert-vertical alert-soft py-1 text-base alert-error"> </div>'),Xt=w('<div class="alert w-full alert-vertical alert-soft py-1 text-base alert-error"> </div>'),Yt=w('<div class="fixed top-2 z-50 flex w-full justify-center"><div class="flex flex-col gap-1"><!> <!></div></div>'),Zt=w('<!> <div class="flex justify-center"><div class="tooltip-open tooltip tooltip-error" data-tip="Debug"><button class="text-2xl font-bold"> </button></div></div> <div class="text-center"> </div> <div class="m-1 mb-12 flex items-center justify-center"><div class="flex w-full max-w-sm flex-col items-center justify-center gap-1"><div><input type="radio" name="save_data" class="tab border-b-0! [--tab-border-color:--color-base-content]" aria-label="Save Data" value="slots" checked/> <div class="tab-content border-base-content bg-base-100 p-4"><!></div> <input type="radio" name="save_data" class="tab border-b-0! [--tab-border-color:--color-base-content]" value="presets" aria-label="Presets"/> <div class="tab-content border-base-content bg-base-100 p-4"><!></div></div> <!> <!></div></div> <!>',1);function de(_t,ct){Dt(ct,!0);const ut=r=>{var l=Rt(),f=s(t(l),2),h=t(f);a(f);var g=s(f,4),i=t(g),m=t(i,!0);a(i);var v=s(i,2),d=t(v,!0);a(v),Et(4),a(g);var p=s(g,2);p.__click=()=>_(o,-1);var x=t(p,!0);a(p),a(l),q(()=>{n(h,`An error occurred while loading ${(dt[e(o)].label||`File #${e(o)+1}`)??""}'s save data.`),n(m,c.save_and_quit),n(d,c.copy_url_to_clipboard),n(x,c.save_and_quit)}),b(r,l)};let y=E("loading");const N=ot(()=>J.players.some(r=>J.players.some(l=>r.id!==l.id&&r.name===l.name))),O=ot(()=>J.players.some(r=>!r.name));let o=E(-1),P=E(void 0),u=E("");function Q(r){!e(u)||r instanceof KeyboardEvent&&r.key!=="Enter"||(localStorage.setItem(`werewolf-moderator[${e(o)}]`,e(u)),Qt(e(u)))}var R=Zt(),U=z(R);Kt(U,{get title(){return lt["werewolf-moderator"]},get description(){return Ft["werewolf-moderator"]},uri:"werewolf-moderator/debug"});var F=s(U,2),V=t(F),W=t(V),pt=t(W,!0);a(W),a(V),a(F);var H=s(F,2),bt=t(H,!0);a(H);var $=s(H,2),X=t($),T=t(X),Y=t(T);it(Y);var B=s(Y,2),ft=t(B);Mt(ft,{get file(){return e(o)},set file(r){_(o,r,!0)},get load_save_status(){return e(y)},set load_save_status(r){_(y,r,!0)}}),a(B);var mt=s(B,2),Z=s(mt,2),xt=t(Z);Gt(xt,{get load_save_status(){return e(y)},set load_save_status(r){_(y,r,!0)},get file(){return e(o)},set file(r){_(o,r,!0)}}),a(Z),a(T);var tt=s(T,2);{var gt=r=>{var l=st(),f=z(l);{var h=i=>{var m=Ut();b(i,m)},g=i=>{var m=st(),v=z(m);{var d=x=>{ut(x)},p=x=>{var et=Vt(),A=z(et);A.__click=()=>_(o,-1);var kt=t(A,!0);a(A);var C=s(A,2),at=t(C),St=t(at);Jt(St,()=>dt[e(o)],()=>e(o),()=>!1),a(at),a(C);var K=s(C,4),D=t(K);D.__pointerup=async()=>{try{navigator.clipboard.writeText(localStorage.getItem(`werewolf-moderator[${e(o)}]`)??""),nt("Copied to clipboard!","success",3e3)}catch{nt("Failed to copy to clipboard! The save state has been put into the input below, so you can copy it manually.","error",15e3),_(u,localStorage.getItem(`werewolf-moderator[${e(o)}]`)??"",!0),await zt(),e(P)?.focus(),e(P)?.select()}};var jt=t(D,!0);a(D);var L=s(D,2),k=t(L);it(k),k.__keydown=Q,Ct(k,G=>_(P,G),()=>e(P));var j=s(k,2);j.__click=()=>{_(u,"")};var qt=t(j);Nt(qt),a(j),a(L);var I=s(L,2);I.__click=Q;var Pt=t(I,!0);a(I),a(K);var rt=s(K,2);Ot(rt,{});var M=s(rt,2);M.__click=()=>_(o,-1);var Tt=t(M,!0);a(M),q(()=>{n(kt,c.save_and_quit),n(jt,c.copy_url_to_clipboard),vt(k,"placeholder",c.save_state),j.disabled=!e(u),vt(j,"aria-label",c.clear),I.disabled=!e(u),n(Pt,c.import_save_state),n(Tt,c.save_and_quit)}),Bt(k,()=>e(u),G=>_(u,G)),b(x,et)};S(v,x=>{e(y)==="error"?x(d):x(p,!1)},!0)}b(i,m)};S(f,i=>{e(y)==="loading"?i(h):i(g,!1)})}b(r,l)};S(tt,r=>{e(o)!==-1&&r(gt)})}var wt=s(tt,2);Lt(wt,{}),a(X),a($);var yt=s($,2);{var ht=r=>{var l=Yt(),f=t(l),h=t(f);{var g=v=>{var d=Wt(),p=t(d,!0);a(d),q(()=>n(p,c.empty_player_name)),b(v,d)};S(h,v=>{e(O)&&v(g)})}var i=s(h,2);{var m=v=>{var d=Xt(),p=t(d,!0);a(d),q(()=>n(p,c.duplicate_players)),b(v,d)};S(i,v=>{e(N)&&v(m)})}a(f),a(l),b(r,l)};S(yt,r=>{(e(N)||e(O))&&r(ht)})}q(()=>{n(pt,lt["werewolf-moderator"]),n(bt,Ht["werewolf-moderator"]),$t(T,1,`tabs-lift tabs w-full ${e(o)===-1?"":"hidden"}`)}),b(_t,R),It()}At(["click","pointerup","keydown"]);export{de as component};
