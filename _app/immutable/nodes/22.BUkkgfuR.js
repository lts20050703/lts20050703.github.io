import{d as At,f as w,a as f,c as rt,s as d}from"../chunks/CRRtVwjb.js";import{p as Dt,f as $,s,c as a,i as _,d as T,g as t,t as q,a as It,h as st,r,o as Et,n as Ft}from"../chunks/Dh-QpTF3.js";import{i as k}from"../chunks/TWXXjeS0.js";import{d as Ht,n as ot,r as lt,v as $t,s as it}from"../chunks/D-ZEtY2B.js";import{s as zt}from"../chunks/DJIhRGty.js";import{c as Ct,b as Kt}from"../chunks/DlWfgR0a.js";import{b as Lt}from"../chunks/C9tYwez2.js";import{H as Bt}from"../chunks/CK9n_JMe.js";import{T as Gt,t as vt}from"../chunks/vJEF-6Cm.js";import{S as Jt,P as Mt,s as N,i as p,a as Nt,b as nt,x as Ot,A as Qt,c as Rt,l as Ut}from"../chunks/CoOe1tl5.js";var Vt=w('<div role="alert" class="alert w-full alert-vertical alert-soft text-base alert-error"><!> <div> </div> <div>Please follow the following steps:</div> <ol class="list list-decimal text-left text-base"><li> </li> <li> </li> <li>Send Link the save data</li> <li>Delete the save file</li></ol> <button class="btn btn-primary"> </button></div>'),Wt=w('<span class="loading loading-xl loading-spinner"></span>'),Xt=w('<button class="btn btn-sm"> </button> <div class="w-full bg-base-100 p-4"><div class="border p-4"><!></div></div> <hr class="my-2 w-full opacity-25"/> <div class="flex flex-col items-center justify-center gap-4"><button class="btn btn-sm btn-primary"> </button> <div class="flex flex-row gap-1"><input class="input input-sm input-primary" type="text"/> <button class="btn px-1 btn-sm btn-error"><!></button></div> <button class="btn btn-sm btn-error"> </button></div> <hr class="my-2 w-full opacity-25"/> <!>',1),Yt=w('<div class="alert w-full alert-vertical alert-soft py-1 text-base alert-error"> </div>'),Zt=w('<div class="alert w-full alert-vertical alert-soft py-1 text-base alert-error"> </div>'),te=w('<div class="fixed top-2 z-50 flex w-full justify-center"><div class="flex flex-col gap-1"><!> <!></div></div>'),ee=w('<!> <div class="flex justify-center"><div class="tooltip-open tooltip tooltip-error" data-tip="Debug"><button class="text-2xl font-bold"> </button></div></div> <div class="text-center"> </div> <div class="m-1 mb-12 flex items-center justify-center"><div class="flex w-full max-w-sm flex-col items-center justify-center gap-1"><div><input type="radio" name="save_data" class="tab border-b-0! [--tab-border-color:--color-base-content]" aria-label="Save Data"/> <div class="tab-content border-base-content bg-base-100 p-4"><!></div> <input type="radio" name="save_data" class="tab border-b-0! [--tab-border-color:--color-base-content]" value="presets" aria-label="Presets"/> <div class="tab-content border-base-content bg-base-100 p-4"><!></div></div> <!> <!></div></div> <!>',1);function ce(dt,_t){Dt(_t,!0);const ct=[],ut=e=>{var l=Vt(),g=a(l);Rt(g);var m=s(g,2),j=a(m);r(m);var i=s(m,4),c=a(i),n=a(c,!0);r(c);var v=s(c,2),x=a(v,!0);r(v),Ft(4),r(i);var u=s(i,2);u.__click=()=>_(o,-1);var I=a(u,!0);r(u),r(l),q(()=>{d(j,`An error occurred while loading ${(nt[t(o)].label||`File #${t(o)+1}`)??""}'s save data.`),d(n,p.save_and_quit),d(x,p.copy_url_to_clipboard),d(I,p.save_and_quit)}),f(e,l)};let y=T("loading");const O=st(()=>N.players.some(e=>N.players.some(l=>e.id!==l.id&&e.name===l.name))),Q=st(()=>N.players.some(e=>!e.name));let R=T("slots"),o=T(-1),A=T(void 0),b=T("");function U(e){!t(b)||e instanceof KeyboardEvent&&e.key!=="Enter"||(localStorage.setItem(`werewolf-moderator[${t(o)}]`,t(b)),Ut(t(b)))}var V=ee(),W=$(V);Bt(W,{get title(){return ot["werewolf-moderator"]},get description(){return Ht["werewolf-moderator"]},uri:"werewolf-moderator/debug"});var z=s(W,2),X=a(z),Y=a(X),pt=a(Y,!0);r(Y),r(X),r(z);var C=s(z,2),bt=a(C,!0);r(C);var K=s(C,2),Z=a(K),D=a(Z),S=a(D);lt(S),S.value=S.__value="slots";var L=s(S,2),ft=a(L);Jt(ft,{get file(){return t(o)},set file(e){_(o,e,!0)},get load_save_status(){return t(y)},set load_save_status(e){_(y,e,!0)}}),r(L);var mt=s(L,2),tt=s(mt,2),gt=a(tt);Mt(gt,{get load_save_status(){return t(y)},set load_save_status(e){_(y,e,!0)},get file(){return t(o)},set file(e){_(o,e,!0)}}),r(tt),r(D);var et=s(D,2);{var xt=e=>{var l=rt(),g=$(l);{var m=i=>{var c=Wt();f(i,c)},j=i=>{var c=rt(),n=$(c);{var v=u=>{ut(u)},x=u=>{var I=Xt(),E=$(I);E.__click=()=>_(o,-1);var kt=a(E,!0);r(E);var B=s(E,2),at=a(B),St=a(at);Nt(St,{get a_slot(){return nt[t(o)]},get index(){return t(o)},show_time:!0}),r(at),r(B);var G=s(B,4),F=a(G);F.__pointerup=async()=>{try{navigator.clipboard.writeText(localStorage.getItem(`werewolf-moderator[${t(o)}]`)??""),vt("Copied to clipboard!","success",3e3)}catch{vt("Failed to copy to clipboard! The save state has been put into the input below, so you can copy it manually.","error",15e3),_(b,localStorage.getItem(`werewolf-moderator[${t(o)}]`)??"",!0),await Et(),t(A)?.focus(),t(A)?.select()}};var jt=a(F,!0);r(F);var J=s(F,2),h=a(J);lt(h),h.__keydown=U,Lt(h,M=>_(A,M),()=>t(A));var P=s(h,2);P.__click=()=>{_(b,"")};var Pt=a(P);Ot(Pt),r(P),r(J);var H=s(J,2);H.__click=U;var Tt=a(H,!0);r(H),r(G);var qt=s(G,4);Qt(qt,{}),q(()=>{d(kt,p.save_and_quit),d(jt,p.copy_json_to_clipboard),it(h,"placeholder",p.save_state),P.disabled=!t(b),it(P,"aria-label",p.clear),H.disabled=!t(b),d(Tt,p.import_save_state)}),Kt(h,()=>t(b),M=>_(b,M)),f(u,I)};k(n,u=>{t(y)==="error"?u(v):u(x,!1)},!0)}f(i,c)};k(g,i=>{t(y)==="loading"?i(m):i(j,!1)})}f(e,l)};k(et,e=>{t(o)!==-1&&e(xt)})}var wt=s(et,2);Gt(wt,{}),r(Z),r(K);var yt=s(K,2);{var ht=e=>{var l=te(),g=a(l),m=a(g);{var j=n=>{var v=Yt(),x=a(v,!0);r(v),q(()=>d(x,p.empty_player_name)),f(n,v)};k(m,n=>{t(Q)&&n(j)})}var i=s(m,2);{var c=n=>{var v=Zt(),x=a(v,!0);r(v),q(()=>d(x,p.duplicate_players)),f(n,v)};k(i,n=>{t(O)&&n(c)})}r(g),r(l),f(e,l)};k(yt,e=>{(t(O)||t(Q))&&e(ht)})}q(()=>{d(pt,ot["werewolf-moderator"]),d(bt,$t["werewolf-moderator"]),zt(D,1,`tabs-lift tabs w-full ${t(o)===-1?"":"hidden"}`)}),Ct(ct,[],S,()=>t(R),e=>_(R,e)),f(dt,V),It()}At(["click","pointerup","keydown"]);export{ce as component};
