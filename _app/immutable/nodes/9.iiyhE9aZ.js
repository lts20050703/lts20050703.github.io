import{f as j,a as b,c as W}from"../chunks/D2Os11Ns.js";import{p as xt,u as X,b as Y,d as R,e as Z,g as t,h as S,i as f,f as $,s as i,c as a,t as E,a as gt,r,n as ht}from"../chunks/CdrH6FGe.js";import{d as wt,s as y,e as yt}from"../chunks/D32HDFMs.js";import{i as tt}from"../chunks/C_8Ez5C7.js";import{e as kt,i as jt}from"../chunks/Dh-GaU7P.js";import{h as Nt}from"../chunks/DxitRtd0.js";import{d as Tt,n as O,s as L,r as Ft}from"../chunks/Bq4LcSYx.js";import{s as It}from"../chunks/B7jqvjGK.js";import{b as At}from"../chunks/C-DQbPxC.js";import{r as Rt}from"../chunks/CQfnnhRe.js";import{H as St}from"../chunks/BEnaQkc5.js";import{c as Lt,a as Dt,b as Ht,d as Mt}from"../chunks/j4EUIJTV.js";import{_ as $t}from"../chunks/B-9FI9Fw.js";import{o as Et,b as Ot,s as k,p as Pt,t as qt}from"../chunks/zY0APpH_.js";var zt=j('<div class="flex w-full items-center justify-center gap-3"><button class="btn w-10 p-0 btn-sm btn-primary" aria-label="First page"><!></button> <button class="btn w-10 p-0 btn-sm btn-primary" aria-label="Previous page"><!></button> <div class="flex flex-row items-center justify-center gap-1"><input type="text" inputmode="numeric"/> <div>/</div> <div class="w-14"> </div></div> <button class="btn w-10 p-0 btn-sm btn-primary" aria-label="Next page"><!></button> <button class="btn w-10 p-0 btn-sm btn-primary" aria-label="Last page"><!></button></div>'),Bt=j('<div class="text-center text-warning">Invalid page number</div>'),Ct=j('<div class="loading"></div> <div>Loading...</div>',1),Gt=j('<div class="w-5xl max-w-full"><div class="join-vertical join w-5xl max-w-full rounded border border-base-content/25 bg-base-200"><div class="join-item flex flex-col px-3 py-2"><div class="flex flex-row justify-between gap-4"><div class="flex flex-row gap-4"><b>Link</b> <div>@lts20050703</div> <div class="text-base-content/50"> </div></div> <a class="link link-primary underline-offset-8">Original</a></div> <div class="text-base-content/50">Replying to <a class="link link-primary underline-offset-8"> </a></div></div> <div class="dark join-item prose w-5xl max-w-full bg-base-300 px-3 py-2 text-base-content prose-h2:text-base-content prose-h3:text-base-content prose-a:link prose-a:link-primary prose-a:underline-offset-8"><!></div></div></div>'),Jt=j('<!> <div class="m-1 flex max-w-full flex-col items-center justify-center gap-4"><a class="link link-primary underline-offset-8"> </a> <hr class="w-5xl max-w-full opacity-25"/> <div> </div> <!> <!></div>',1);function oe(et,at){xt(at,!0);const rt=e=>{var o=zt(),n=a(o);n.__click=()=>{f(u,"1")};var g=a(n);Lt(g),r(n);var v=i(n,2);v.__click=()=>{f(u,(t(s)-1).toString(),!0)};var d=a(v);Dt(d),r(v);var m=i(v,2),_=a(m);Ft(_);var I=i(_,4),l=a(I,!0);r(I),r(m);var c=i(m,2);c.__click=()=>{f(u,(t(s)+1).toString(),!0)};var A=a(c);Ht(A),r(c);var p=i(c,2);p.__click=()=>{f(u,t(x).toString(),!0)};var h=a(p);Mt(h),r(p),r(o),E(()=>{n.disabled=t(P),v.disabled=t(P),It(_,1,`input input-sm w-14 text-right ${t(z)?"input-error":"input-primary"}`),y(l,t(x)),c.disabled=t(q),p.disabled=t(q)}),yt("focus",_,ot),At(_,()=>t(u),w=>f(u,w)),b(e,o)};X(()=>Y(()=>{it()}));const st=Et({commentId:k(),postedAt:k(),body:Pt(k(),qt(async e=>(await $t(e))?.code)),post:k(),inReplyTo:Ot(k())});let u=R("1"),s=S(()=>parseInt(t(u))),N=R(Z([])),x=R(0);const P=S(()=>isNaN(t(s))||t(s)<=1),q=S(()=>isNaN(t(s))||t(s)>=t(x)),z=S(()=>isNaN(t(s))||t(s)<1||t(s)>Math.max(t(x),1));let T=R(Z([]));X(()=>{t(s),Y(B)});async function it(){f(T,(await(await fetch("/cohost/comments.txt")).text()).split(`
`),!0),f(x,Math.ceil(t(T).length/10),!0),B()}async function B(){if(!(isNaN(t(s))||t(s)<1)){f(N,[],!0);for(let e=(t(s)-1)*10;e<t(s)*10&&!(e>=t(T).length);e+=1){const o=t(T)[e];try{const n=await st.parseAsync(await(await fetch(`/cohost/comments/${o}.json`)).json());t(N).push({...n,slug:o})}catch(n){console.log(n)}}}}function C(e,o="medium",n="en"){const g=new Date(e);return new Intl.DateTimeFormat(n,{dateStyle:o}).format(g)}function ot(){setTimeout(()=>this.selectionStart=this.selectionEnd=this.value.length)}var nt={format_date:C},G=Jt(),J=$(G);St(J,{get title(){return O.cohost_comments},get description(){return Tt.cohost_comments},uri:"cohost/comments"});var K=i(J,2),F=a(K),lt=a(F,!0);r(F);var D=i(F,4),ct=a(D,!0);r(D);var Q=i(D,2);rt(Q);var vt=i(Q,2);{var dt=e=>{var o=Bt();b(e,o)},mt=e=>{var o=W(),n=$(o);{var g=d=>{var m=Ct();ht(2),b(d,m)},v=d=>{var m=W(),_=$(m);kt(_,17,()=>t(N),jt,(I,l)=>{var c=Gt(),A=a(c),p=a(A),h=a(p),w=a(h),H=i(a(w),4),pt=a(H,!0);r(H),r(w);var ft=i(w,2);r(h);var U=i(h,2),M=i(a(U)),ut=a(M,!0);r(M),r(U),r(p);var V=i(p,2),_t=a(V);Nt(_t,()=>t(l).body),r(V),r(A),r(c),E(bt=>{L(H,"title",t(l).postedAt),y(pt,bt),L(ft,"href",`${t(l).post??""}#comment-${t(l).commentId??""}`),L(M,"href",t(l).inReplyTo||t(l).post),y(ut,t(l).inReplyTo||t(l).post)},[()=>C(t(l).postedAt)]),b(I,c)}),b(d,m)};tt(n,d=>{t(N).length===0?d(g):d(v,!1)},!0)}b(e,o)};tt(vt,e=>{t(z)?e(dt):e(mt,!1)})}return r(K),E(e=>{L(F,"href",e),y(lt,O.cohost_posts),y(ct,O.cohost_comments)},[()=>Rt("/cohost/")]),b(et,G),gt(nt)}wt(["click"]);export{oe as component};
