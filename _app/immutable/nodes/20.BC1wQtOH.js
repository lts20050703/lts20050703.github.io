import{d as ft,f as K,s as j,e as V,a as L}from"../chunks/DUptxo_s.js";import{D as dt,am as ct,an as pt,p as mt,d as b,e as X,f as Y,s as f,c as h,g as t,t as z,a as vt,i as l,r as g,ao as F,n as xt}from"../chunks/HufPbK5P.js";import{e as Z,i as tt}from"../chunks/ComDtaVW.js";import{d as _t,n as et,a as st,v as ht,r as rt}from"../chunks/CParlxkP.js";import{b as G}from"../chunks/CBEnHbB_.js";import{H as gt}from"../chunks/BjvqsN9J.js";import{u as bt}from"../chunks/C6ltWnTA.js";const wt=[];function nt(e,d=!1,m=!1){return M(e,new Map,"",wt,null,m)}function M(e,d,m,c,v=null,i=!1){if(typeof e=="object"&&e!==null){var p=d.get(e);if(p!==void 0)return p;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(dt(e)){var r=Array(e.length);d.set(e,r),v!==null&&d.set(v,r);for(var x=0;x<e.length;x+=1){var S=e[x];x in e&&(r[x]=M(S,d,m,c,null,i))}return r}if(ct(e)===pt){r={},d.set(e,r),v!==null&&d.set(v,r);for(var q in e)r[q]=M(e[q],d,m,c,null,i);return r}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function"&&!i)return M(e.toJSON(),d,m,c,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}var qt=K('<div class="flex flex-row items-center justify-center gap-1"><div> </div> <input class="input input-sm input-primary" type="text" inputmode="decimal"/></div>'),yt=K('<div> </div> <!> <hr class="w-5xl max-w-full opacity-25"/>',1),$t=K('<!> <div class="text-center text-2xl font-bold"> </div> <div class="text-center"> </div> <div class="flex w-full flex-col items-center justify-center gap-1 p-1"><div>Đề</div> <textarea class="textarea w-full textarea-primary" cols="100" rows="10"></textarea> <button class="btn btn-sm btn-primary">Nhập đề</button> <!> <div class="flex flex-row items-center justify-center gap-1"><div>Số đề:</div> <input class="input input-sm input-primary" type="text" inputmode="decimal"/></div> <button class="btn btn-sm btn-primary">Tạo đề</button> <div>Đề</div> <textarea class="textarea w-full textarea-primary" cols="100" rows="10" readonly=""></textarea> <div>Đáp Án</div> <textarea class="textarea w-full textarea-primary" cols="100" rows="10" readonly=""></textarea></div>',1);function Wt(e,d){mt(d,!0);let m=b(0),c=b(X([])),v=b(""),i=b(""),p=b(""),r=b(X([]));function x(s){try{const a=s.split(`
`);l(c,[],!0),l(r,[],!0);for(const n of a){if(n.startsWith("##")){t(r).at(-1)?.questions.push({questions:[],title:n.slice(2)});continue}if(n.startsWith("#")){t(c).push([]),t(r).push({questions:[],title:n.slice(1)});continue}if(bt(n.toLowerCase()).startsWith("cau")){t(r).at(-1)?.questions.at(-1)?.questions.push({question:n.split(/ +/).slice(2).join(" "),answers:[]});continue}if(!n.trim().length)continue;const u=t(r).at(-1)?.questions.at(-1)?.questions.at(-1),o=u?.answers;!u||!o||(n.startsWith("*")?o.push({answer:n.split(/ +/).slice(1).join(" "),right:!0}):o.push({answer:n.split(/ +/).slice(1).join(" "),right:!1}))}return t(r)}catch{return[]}}function S(s){const a=Math.floor(Math.random()*s.length);return{index:a,element:s[a]}}function q(){l(i,""),l(p,"");const s=structuredClone(nt(t(r)));for(let a=0;a<t(m);a+=1){l(i,t(i)+`${a+1}	"`),l(p,t(p)+`Mã đề ${a+1}
`);let n=0;for(let u=0;u<t(c).length;u+=1)for(let o=0;o<t(c)[u].length;o+=1){n+=1,s[u].questions[o].questions.length||(s[u].questions[o].questions=structuredClone(nt(t(r))[u].questions[o].questions));const{element:w,index:I}=S(s[u].questions[o].questions);s[u].questions[o].questions.splice(I,1),l(i,t(i)+`Câu ${n}: ${w.question}
`);for(let _=0;_<w.answers.length;_+=1){const C=w.answers[_];l(i,t(i)+`${["A","B","C","D"][_]}. ${C.answer}
`),C.right&&l(p,t(p)+`${n}: ${["A","B","C","D"][_]}
`)}}l(i,t(i)+`"
`)}}var k=$t(),P=Y(k);gt(P,{get title(){return et.stantodium},get description(){return _t.stantodium},uri:"stantodium"});var D=f(P,2),it=h(D,!0);g(D);var T=f(D,2),at=h(T,!0);g(T);var Q=f(T,2),W=f(h(Q),2);F(W);var A=f(W,2);A.__click=()=>{x(t(v))};var R=f(A,2);Z(R,17,()=>t(r),tt,(s,a,n)=>{var u=yt(),o=Y(u),w=h(o,!0);g(o);var I=f(o,2);Z(I,17,()=>t(a).questions,tt,(_,C,U)=>{let ot=()=>t(C).title;var J=qt(),O=h(J),ut=h(O);g(O);var E=f(O,2);rt(E),g(J),z(()=>{j(ut,`Số câu ${ot()??""}:`),st(E,t(c)[n][U])}),V("blur",E,lt=>t(c)[n][U]=parseInt(lt.currentTarget.value)||0),L(_,J)}),xt(2),z(()=>j(w,t(a).title)),L(s,u)});var N=f(R,2),y=f(h(N),2);rt(y),g(N);var B=f(N,2);B.__click=q;var $=f(B,4);F($);var H=f($,4);F(H),g(Q),z(s=>{j(it,et.stantodium),j(at,ht.stantodium),A.disabled=!t(v),y.disabled=!t(v),st(y,t(m)),B.disabled=s,$.disabled=!t(i),H.disabled=!t(p)},[()=>t(m)<=0||t(c).some(s=>!s.length||s.some(a=>a===void 0||a<=0))]),G(W,()=>t(v),s=>l(v,s)),V("blur",y,s=>l(m,parseInt(s.currentTarget.value)||0,!0)),G($,()=>t(i),s=>l(i,s)),G(H,()=>t(p),s=>l(p,s)),L(e,k),vt()}ft(["click"]);export{Wt as component};
