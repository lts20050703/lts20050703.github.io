import{f as O,a as _,c as te}from"../chunks/BAhx-X9G.js";import{f as x,c as i,r as s,s as a,m as Oe,t as I,g as r,p as ge,h as ae,a as ye,u as de,b as ce,i as W,d as oe}from"../chunks/DpYMcOls.js";import{d as le,s as m,e as ve}from"../chunks/DO8qiAfh.js";import{i as U}from"../chunks/A2GgpgHd.js";import{r as re,s as F,d as De,n as _e,v as Ee}from"../chunks/BaETQRMq.js";import{a as He,b as Ie,c as me}from"../chunks/qtjqsBgj.js";import{r as Se}from"../chunks/DF0ApPXB.js";import{H as ze}from"../chunks/D8CBjT4n.js";import{L as Ne}from"../chunks/Cq3MtHaj.js";import{t as Te,T as $e}from"../chunks/BY87aMoq.js";import{r as xe,s as t,m as ue,k as fe,i as l,n as he,b as we,d as ke,f as Ge,h as Me,x as Ze,l as qe,g as Be,a as Ce,e as Fe,p as Je,c as Ke,j as pe}from"../chunks/DDJJYouR.js";import{N as Pe,D as Qe}from"../chunks/D-gQXpJj.js";import{e as je}from"../chunks/CelAGHVR.js";import{a as be,d as Re,f as Ue,b as Ve}from"../chunks/f-IhlLTy.js";import{c as We,s as se}from"../chunks/Bk5HspoW.js";import{a as Xe}from"../chunks/DT0IpB15.js";import"../chunks/D3-2TsA2.js";const Ye=J=>{var M=tt(),g=x(M);g.__click=()=>{for(const c of xe){if(t.roles.includes(c))continue;(ue.includes(c)||fe.includes(c))&&t.roles.push(c)}};var k=i(g,!0);s(g);var f=a(g,2),n=i(f),j=i(n,!0);s(n);var K=a(n,2);et(K,()=>c=>ue.includes(c)||fe.includes(c)),s(f),I(()=>{m(k,l.add_all_roles),m(j,l.msn25)}),_(J,M)},et=(J,M=Oe)=>{var g=te(),k=x(g);je(k,1,()=>xe,f=>f,(f,n)=>{var j=te(),K=x(j);{var c=D=>{var S=at(),E=x(S),P=i(E,!0);s(E);var A=a(E,2);re(A);var H=a(A,2),Q=i(H,!0);s(H),I((z,L,X)=>{se(E,1,`text-right ${z??""}`),F(E,"for",r(n)),m(P,l.role_names[r(n)]),A.disabled=r(n)==="villager"||r(n)==="werewolf",F(A,"id",r(n)),se(H,1,L),F(H,"for",r(n)),m(Q,X)},[()=>t.roles.includes(r(n))?"text-primary":"",()=>We(t.roles.includes(r(n))?"text-primary/50":"text-base-content/50"),()=>r(n).replaceAll("_"," ").replaceAll("25","").replaceAll("24","")]),He(A,()=>t.roles.includes(r(n)),z=>{if(z&&!t.roles.includes(r(n)))t.roles.push(r(n));else if(!z&&t.roles.includes(r(n))){const L=t.roles.indexOf(r(n));L>-1&&t.roles.splice(L,1)}}),_(D,S)};U(K,D=>{M()(r(n))&&D(c)})}_(f,j)}),_(J,g)};var tt=O('<button class="btn btn-primary btn-sm"> </button> <div class="grid grid-cols-[1fr_auto_1fr] items-center justify-center gap-x-2 gap-y-1"><div class="col-span-3 mt-4 text-center text-lg font-bold"> </div> <!></div>',1),at=O('<label> </label> <input class="toggle toggle-primary" type="checkbox"/> <label> </label>',1);le(["click"]);var rt=O('<div class="col-span-full grid grid-cols-subgrid gap-1"><div class="h-6 w-6"><!></div> <input type="text"/> <button class="btn btn-error btn-sm px-1"><!></button></div>'),st=O('<div class="border-primary grid grid-cols-[auto_1fr_auto] items-center justify-center gap-1 rounded border p-1"><div></div> <div class="text-center"> </div> <div></div> <section class="col-span-full grid grid-cols-subgrid gap-1"></section></div>'),it=O('<button class="btn btn-error btn-sm"> </button> <hr class="my-2 w-full opacity-25"/> <div> </div> <!> <hr class="my-2 w-full opacity-25"/> <!> <hr class="my-2 w-full opacity-25"/> <div class="text-center text-3xl"> </div> <!> <!> <button class="btn btn-primary"> </button>',1);function nt(J,M){ge(M,!0);const g=300,k=ae(()=>t.players.some(y=>t.players.some(N=>y.id!==N.id&&y.name===N.name))),f=ae(()=>t.players.some(y=>!y.name));var n=it(),j=x(n);j.__click=function(...y){he?.apply(this,y)};var K=i(j,!0);s(j);var c=a(j,4),D=i(c,!0);s(c);var S=a(c,2);we(S);var E=a(S,4);{var P=y=>{var N=st(),Y=a(i(N),2),ie=i(Y,!0);s(Y);var o=a(Y,4);je(o,31,()=>t.players,e=>e.id,(e,v,R)=>{var T=rt(),u=i(T),p=i(u);Me(p),s(u),be(u,d=>Re?.(d));var b=a(u,2);re(b);var h=a(b,2);h.__click=()=>{const d=t.players.indexOf(r(v));d!==-1&&t.players.splice(d,1)};var V=i(h);Ze(V),s(h),s(T),I(d=>{se(b,1,`input input-sm ${d??""}`),F(b,"placeholder",`${l.player_name??""}...`),h.disabled=t.players.length<=2,F(h,"aria-label",l.remove_player)},[()=>!r(v).name||t.players.some((d,$)=>$!==r(R)&&d.name===r(v).name)?"input-warning":"input-primary"]),Ie(b,()=>r(v).name,d=>r(v).name=d),Xe(T,()=>Ue,()=>({duration:g})),_(e,T)}),s(o),be(o,(e,v)=>Ve?.(e,v),()=>({items:t.players,flipDurationMs:g,transformDraggedElement:e=>{e?.classList.remove("grid-cols-subgrid"),e?.classList.add("grid","grid-cols-[auto_1fr_auto]")}})),s(N),I(()=>m(ie,l.player_name)),ve("consider",o,e=>{t.players=e.detail.items}),ve("finalize",o,e=>{t.players=e.detail.items}),_(y,N)};U(E,y=>{t.players.length&&y(P)})}var A=a(E,4),H=i(A,!0);s(A);var Q=a(A,2);Ye(Q);var z=a(Q,2);ke(z);var L=a(z,2);L.__click=()=>{t.time="night",t.night===0?Ge():t.current_role?t.time="night":t.time="day"};var X=i(L,!0);s(L),I(()=>{m(K,l.new_game),se(c,1,`text-3xl ${r(k)||r(f)?"text-warning":"text-success"}`),m(D,l.players),m(H,l.roles),L.disabled=r(k)||r(f),m(X,l.start)}),_(J,n),ye()}le(["click"]);var ot=O('<button class="btn btn-sm"> </button> <!> <hr class="my-2 w-full opacity-25"/> <div class="tabs tabs-lift w-full"><input type="radio" name="section" class="tab border-b-0! [--tab-border-color:--color-base-content]"/> <div class="tab-content bg-base-100 border-base-content p-4"><div class="flex flex-col items-center justify-center gap-1"><!> <hr class="my-2 w-full opacity-25"/> <!> <hr class="my-2 w-full opacity-25"/> <!></div></div> <input type="radio" name="section" class="tab border-b-0! [--tab-border-color:--color-base-content]"/> <div class="tab-content bg-base-100 border-base-content p-4"><div class="flex flex-col items-center justify-center gap-1"><!></div></div></div> <!> <!>',1),lt=O("<!> <!>",1),dt=O('<div class="flex w-full flex-row justify-between"><button class="btn btn-sm"> </button> <button class="btn btn-sm"> </button></div> <!>',1),ct=O('<div class="flex w-full flex-row justify-between"><button class="btn btn-sm"> </button> <button class="btn btn-sm"> </button></div> <!>',1),vt=O(`<div class="fixed bottom-4 z-50 flex w-full flex-col items-center justify-center gap-1 p-1 text-center"><div>If Link ask you to export save state (or you know how to manually update the save file to the
			latest version), click the link below</div> <a class="link link-primary underline-offset-8">Go to debug page</a></div>`),_t=O('<!> <div class="text-center text-2xl font-bold"> </div> <div class="text-center"> </div> <div class="m-1 mb-12 flex items-center justify-center"><div class="flex w-full max-w-sm flex-col items-center justify-center gap-1"><!></div></div> <!> <!> <!>',1);function Ht(J,M){ge(M,!0);const g=[];let k=oe(!1),f=oe("loading"),n=oe("players");const j=ae(()=>t.players.some(o=>t.players.some(e=>o.id!==e.id&&o.name===e.name))),K=ae(()=>t.players.some(o=>!o.name));de(()=>ce(()=>{W(f,qe(localStorage.getItem("werewolf-moderator")),!0),t.deck=["msn25"],Object.entries(l).forEach(([o,e])=>{typeof e=="string"&&(e.includes(" (25)")||e.includes(" (24)"))&&(l[o]=e.replaceAll(" (25)","").replaceAll(" (24)",""))}),Object.entries(l.role_names).forEach(([o,e])=>{typeof e=="string"&&(e.includes(" (25)")||e.includes(" (24)"))&&(l.role_names[o]=e.replaceAll(" (25)","").replaceAll(" (24)",""))}),Object.entries(l.flags_descriptions).forEach(([o,e])=>{typeof e=="string"&&(e.includes(" (25)")||e.includes(" (24)"))&&(l.flags_descriptions[o]=e.replaceAll(" (25)","").replaceAll(" (24)",""))})})),de(()=>{r(f)==="loaded"&&(localStorage.setItem("werewolf-moderator",Be(t)),ce(()=>Te("Autosaved!","success",1e3)))});var c=_t(),D=x(c);ze(D,{get title(){return _e.msn},get description(){return De.msn},uri:"msn"});var S=a(D,2),E=i(S,!0);s(S);var P=a(S,2),A=i(P,!0);s(P);var H=a(P,2),Q=i(H),z=i(Q);{var L=o=>{var e=ot(),v=x(e);v.__click=()=>{W(k,!1)};var R=i(v,!0);s(v);var T=a(v,2);Ce(T);var u=a(T,4),p=i(u);re(p),p.value=p.__value="players";var b=a(p,2),h=i(b),V=i(h);we(V);var d=a(V,4);Fe(d);var $=a(d,4);Je($),s(h),s(b);var w=a(b,2);re(w),w.value=w.__value="roles";var G=a(w,2),Z=i(G),q=i(Z);Ke(q),s(Z),s(G),s(u);var B=a(u,2);ke(B);var C=a(B,2);pe(C),I(()=>{v.disabled=r(j)||r(K),m(R,l.back),F(p,"aria-label",l.players),F(w,"aria-label",l.roles)}),me(g,[],p,()=>r(n),ee=>W(n,ee)),me(g,[],w,()=>r(n),ee=>W(n,ee)),_(o,e)},X=o=>{var e=te(),v=x(e);{var R=u=>{var p=lt(),b=x(p);nt(b,{});var h=a(b,2);pe(h),_(u,p)},T=u=>{var p=te(),b=x(p);{var h=d=>{var $=dt(),w=x($),G=i(w);G.__click=()=>{t.time="setup"};var Z=i(G,!0);s(G);var q=a(G,2);q.__click=()=>{W(k,!0)};var B=i(q,!0);s(q),s(w);var C=a(w,2);Pe(C,{}),I(()=>{m(Z,l.setup),m(B,l.advanced_settings)}),_(d,$)},V=d=>{var $=te(),w=x($);{var G=Z=>{var q=ct(),B=x(q),C=i(B);C.__click=()=>{t.time="setup"};var ee=i(C,!0);s(C);var ne=a(C,2);ne.__click=()=>{W(k,!0)};var Ae=i(ne,!0);s(ne),s(B);var Le=a(B,2);Qe(Le,{}),I(()=>{m(ee,l.setup),m(Ae,l.advanced_settings)}),_(Z,q)};U(w,Z=>{t.time==="day"&&Z(G)},!0)}_(d,$)};U(b,d=>{t.time==="night"?d(h):d(V,!1)},!0)}_(u,p)};U(v,u=>{t.time==="setup"?u(R):u(T,!1)},!0)}_(o,e)};U(z,o=>{r(k)?o(L):o(X,!1)})}s(Q),s(H);var y=a(H,2);$e(y,{});var N=a(y,2);Ne(N,{get status(){return r(f)},get clear_save(){return he}});var Y=a(N,2);{var ie=o=>{var e=vt(),v=a(i(e),2);s(e),I(R=>F(v,"href",R),[()=>Se("/msn/debug/")]),_(o,e)};U(Y,o=>{r(f)==="error"&&o(ie)})}I(()=>{m(E,_e.msn),m(A,Ee["werewolf-moderator"])}),_(J,c),ye()}le(["click"]);export{Ht as component};
