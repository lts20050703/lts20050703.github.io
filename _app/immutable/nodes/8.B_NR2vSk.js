import{d as Mt,f as b,s as N,a as v,e as Et,c as U}from"../chunks/CRRtVwjb.js";import{p as qt,u as lt,b as vt,d as q,e as dt,g as t,h as z,i as h,f as I,s,c as e,t as F,a as zt,r,n as Bt}from"../chunks/Dh-QpTF3.js";import{i as L}from"../chunks/TWXXjeS0.js";import{e as ct,i as mt}from"../chunks/AiBl2gIP.js";import{h as Ct}from"../chunks/BFSZQ1pZ.js";import{d as Gt,n as J,s as O,r as Jt}from"../chunks/CS6Z6Utc.js";import{s as Kt}from"../chunks/DJIhRGty.js";import{b as Qt}from"../chunks/DOUU1KB6.js";import{r as Vt}from"../chunks/Dr2UnAkI.js";import{H as Wt}from"../chunks/BUjROhLo.js";import{c as Xt,a as Yt,b as Zt,d as ta}from"../chunks/rOLOz81h.js";import{_ as aa}from"../chunks/CJZJpfBn.js";import{o as $,a as ea,b as ra,s as w,d as sa,p as pt,l as K,t as ft,n as ia}from"../chunks/BWkgZKTM.js";var na=b('<div class="flex w-full items-center justify-center gap-3"><button class="btn w-10 p-0 btn-sm btn-primary" aria-label="First page"><!></button> <button class="btn w-10 p-0 btn-sm btn-primary" aria-label="Previous page"><!></button> <div class="flex flex-row items-center justify-center gap-1"><input type="text" inputmode="numeric"/> <div>/</div> <div class="w-14"> </div></div> <button class="btn w-10 p-0 btn-sm btn-primary" aria-label="Next page"><!></button> <button class="btn w-10 p-0 btn-sm btn-primary" aria-label="Last page"><!></button></div>'),oa=b('<div class="text-center text-warning">Invalid page number</div>'),la=b('<div class="loading"></div> <div>Loading...</div>',1),va=b('<div class="wrap-break-word break-all text-base-content/50">Share of post: <a class="link link-primary underline-offset-8"> </a></div>'),da=b("<h2> </h2>"),ca=b("<img/>"),ma=b('<div class="w-5xl max-w-full"><div class="join-vertical join w-5xl max-w-full rounded border border-base-content/25 bg-base-100"><div class="join-item flex flex-col gap-4 px-3 py-2"><div class="flex flex-row justify-between gap-4"><div class="flex flex-row gap-4"><b>Link</b> <div>@lts20050703</div> <div class="text-base-content/50"> </div></div> <a class="link link-primary underline-offset-8">Original</a></div> <!></div> <div class="dark join-item prose w-5xl max-w-full bg-base-200 px-3 py-2 text-base-content prose-h2:text-base-content prose-h3:text-base-content prose-a:link prose-a:link-primary prose-a:underline-offset-8"><!> <!></div></div></div>'),pa=b('<!> <div class="m-1 flex max-w-full flex-col items-center justify-center gap-4"><a class="link link-primary underline-offset-8"> </a> <hr class="w-5xl max-w-full opacity-25"/> <div> </div> <!> <!></div>',1);function Fa(_t,ut){qt(ut,!0);const ht=a=>{var n=na(),o=e(n);o.__click=()=>{h(g,"1")};var S=e(o);Xt(S),r(o);var p=s(o,2);p.__click=()=>{h(g,(t(i)-1).toString(),!0)};var f=e(p);Yt(f),r(p);var _=s(p,2),x=e(_);Jt(x);var M=s(x,4),d=e(M,!0);r(M),r(_);var m=s(_,2);m.__click=()=>{h(g,(t(i)+1).toString(),!0)};var E=e(m);Zt(E),r(m);var u=s(m,2);u.__click=()=>{h(g,t(P).toString(),!0)};var T=e(u);ta(T),r(u),r(n),F(()=>{o.disabled=t(Q),p.disabled=t(Q),Kt(x,1,`input input-sm w-14 text-right ${t(W)?"input-error":"input-primary"}`),N(d,t(P)),m.disabled=t(V),u.disabled=t(V)}),Et("focus",x,xt),Qt(x,()=>t(g),A=>h(g,A)),v(a,n)};lt(()=>vt(()=>{gt()}));const bt=$({headline:w(),publishedAt:w(),shareOfPost:ra(w()),blocks:ea(sa("type",[$({type:K("attachment"),attachment:pt($({kind:K("image"),fileURL:w(),attachmentId:w(),altText:w(),width:ia()}),ft(a=>({...a,fileName:encodeURI(a.fileURL.replace(`https://staging.cohostcdn.org/attachment/${a.attachmentId}`,""))})))}),$({type:K("markdown"),markdown:$({content:pt(w(),ft(async a=>(await aa(a))?.code))})})]))});let g=q("1"),i=z(()=>parseInt(t(g))),R=q(dt([])),P=q(0);const Q=z(()=>isNaN(t(i))||t(i)<=1),V=z(()=>isNaN(t(i))||t(i)>=t(P)),W=z(()=>isNaN(t(i))||t(i)<1||t(i)>Math.max(t(P),1));let D=q(dt([]));lt(()=>{t(i),vt(X)});async function gt(){h(D,(await(await fetch("/cohost/posts.txt")).text()).split(`
`),!0),h(P,Math.ceil(t(D).length/10),!0),X()}async function X(){if(!(isNaN(t(i))||t(i)<1)){h(R,[],!0);for(let a=(t(i)-1)*10;a<t(i)*10&&!(a>=t(D).length);a+=1){const n=t(D)[a];try{const o=await bt.parseAsync(await(await fetch(`/cohost/${n}/post.json`)).json());t(R).push({...o,slug:n})}catch(o){console.log(o)}}}}function Y(a,n="medium",o="en"){const S=new Date(a);return new Intl.DateTimeFormat(o,{dateStyle:n}).format(S)}function xt(){setTimeout(()=>this.selectionStart=this.selectionEnd=this.value.length)}var wt={format_date:Y},Z=pa(),tt=I(Z);Wt(tt,{get title(){return J.cohost_posts},get description(){return Gt.cohost_posts},uri:"cohost"});var at=s(tt,2),H=e(at),yt=e(H,!0);r(H);var B=s(H,4),kt=e(B,!0);r(B);var et=s(B,2);ht(et);var jt=s(et,2);{var Nt=a=>{var n=oa();v(a,n)},It=a=>{var n=U(),o=I(n);{var S=f=>{var _=la();Bt(2),v(f,_)},p=f=>{var _=U(),x=I(_);ct(x,17,()=>t(R),mt,(M,d)=>{var m=ma(),E=e(m),u=e(E),T=e(u),A=e(T),C=s(e(A),4),Ft=e(C,!0);r(C),r(A);var Lt=s(A,2);r(T);var Ot=s(T,2);{var Pt=c=>{var l=va(),y=s(e(l)),it=e(y,!0);r(y),r(l),F(()=>{O(y,"href",t(d).shareOfPost),N(it,t(d).shareOfPost)}),v(c,l)};L(Ot,c=>{t(d).shareOfPost&&c(Pt)})}r(u);var rt=s(u,2),st=e(rt);{var St=c=>{var l=da(),y=e(l,!0);r(l),F(()=>N(y,t(d).headline)),v(c,l)};L(st,c=>{t(d).headline&&c(St)})}var Tt=s(st,2);ct(Tt,17,()=>t(d).blocks,mt,(c,l,y,it)=>{var nt=U(),At=I(nt);{var Ut=k=>{var j=ca();F(()=>{O(j,"src",`/cohost/${t(d).slug??""}/${t(l).attachment.fileName??""}`),O(j,"alt",t(l).attachment.altText)}),v(k,j)},$t=k=>{var j=U(),Rt=I(j);{var Dt=G=>{var ot=U(),Ht=I(ot);Ct(Ht,()=>t(l).markdown.content),v(G,ot)};L(Rt,G=>{t(l).type==="markdown"&&G(Dt)},!0)}v(k,j)};L(At,k=>{t(l).type==="attachment"?k(Ut):k($t,!1)})}v(c,nt)}),r(rt),r(E),r(m),F(c=>{O(C,"title",t(d).publishedAt),N(Ft,c),O(Lt,"href",`https://cohost.org/lts20050703/post/${t(d).slug??""}`)},[()=>Y(t(d).publishedAt)]),v(M,m)}),v(f,_)};L(o,f=>{t(R).length===0?f(S):f(p,!1)},!0)}v(a,n)};L(jt,a=>{t(W)?a(Nt):a(It,!1)})}return r(at),F(a=>{O(H,"href",a),N(yt,J.cohost_comments),N(kt,J.cohost_posts)},[()=>Vt("/cohost/comments/")]),v(_t,Z),zt(wt)}Mt(["click"]);export{Fa as component};
