import{d as ut,f as N,s as w,e as K,a as H}from"../chunks/CRRtVwjb.js";import{p as dt,d as f,e as O,f as P,s as o,c as v,g as t,t as I,a as ct,i as n,r as m,l as S,n as pt}from"../chunks/Dh-QpTF3.js";import{s as Q}from"../chunks/BGD6th_r.js";import{e as R,i as U}from"../chunks/AiBl2gIP.js";import{d as vt,n as V,a as X,v as mt,r as Y}from"../chunks/C3RMPwKS.js";import{b as L}from"../chunks/DOUU1KB6.js";import{H as ft}from"../chunks/CYcdquzC.js";import{u as xt}from"../chunks/C6ltWnTA.js";var _t=N('<div class="flex flex-row items-center justify-center gap-1"><div> </div> <input class="input input-sm input-primary" type="text" inputmode="decimal"/></div>'),ht=N('<div> </div> <!> <hr class="w-5xl max-w-full opacity-25"/>',1),gt=N('<!> <div class="text-center text-2xl font-bold"> </div> <div class="text-center"> </div> <div class="flex w-full flex-col items-center justify-center gap-1 p-1"><div>Đề</div> <textarea class="textarea w-full textarea-primary" cols="100" rows="10"></textarea> <button class="btn btn-sm btn-primary">Nhập đề</button> <!> <div class="flex flex-row items-center justify-center gap-1"><div>Số đề:</div> <input class="input input-sm input-primary" type="text" inputmode="decimal"/></div> <button class="btn btn-sm btn-primary">Tạo đề</button> <div>Đề</div> <textarea class="textarea w-full textarea-primary" cols="100" rows="10" readonly=""></textarea> <div>Đáp Án</div> <textarea class="textarea w-full textarea-primary" cols="100" rows="10" readonly=""></textarea></div>',1);function Wt(Z,tt){dt(tt,!0);let h=f(0),c=f(O([])),x=f(""),l=f(""),d=f(""),u=f(O([]));function et(e){try{const a=e.split(`
`);n(c,[],!0),n(u,[],!0);for(const s of a){if(s.startsWith("##")){t(u).at(-1)?.questions.push({questions:[],title:s.slice(2)});continue}if(s.startsWith("#")){t(c).push([]),t(u).push({questions:[],title:s.slice(1)});continue}if(xt(s.toLowerCase()).startsWith("cau")){t(u).at(-1)?.questions.at(-1)?.questions.push({question:s.split(/ +/).slice(2).join(" "),answers:[]});continue}if(!s.trim().length)continue;const r=t(u).at(-1)?.questions.at(-1)?.questions.at(-1),i=r?.answers;!r||!i||(s.startsWith("*")?i.push({answer:s.split(/ +/).slice(1).join(" "),right:!0}):i.push({answer:s.split(/ +/).slice(1).join(" "),right:!1}))}return t(u)}catch{return[]}}function st(e){const a=Math.floor(Math.random()*e.length);return{index:a,element:e[a]}}function at(){n(l,""),n(d,"");const e=structuredClone(Q(t(u)));for(let a=0;a<t(h);a+=1){n(l,t(l)+`${a+1}	"`),n(d,t(d)+`Mã đề ${a+1}
`);let s=0;for(let r=0;r<t(c).length;r+=1)for(let i=0;i<t(c)[r].length;i+=1){s+=1,e[r].questions[i].questions.length||(e[r].questions[i].questions=structuredClone(Q(t(u))[r].questions[i].questions));const{element:_,index:T}=st(e[r].questions[i].questions);e[r].questions[i].questions.splice(T,1),n(l,t(l)+`Câu ${s}: ${_.question}
`);for(let p=0;p<_.answers.length;p+=1){const q=_.answers[p];n(l,t(l)+`${["A","B","C","D"][p]}. ${q.answer}
`),q.right&&n(d,t(d)+`${s}: ${["A","B","C","D"][p]}
`)}}n(l,t(l)+`"
`)}}var z=gt(),E=P(z);ft(E,{get title(){return V.stantodium},get description(){return vt.stantodium},uri:"stantodium"});var y=o(E,2),it=v(y,!0);m(y);var $=o(y,2),rt=v($,!0);m($);var F=o($,2),j=o(v(F),2);S(j);var C=o(j,2);C.__click=()=>{et(t(x))};var G=o(C,2);R(G,17,()=>t(u),U,(e,a,s)=>{var r=ht(),i=P(r),_=v(i,!0);m(i);var T=o(i,2);R(T,17,()=>t(a).questions,U,(p,q,J)=>{let nt=()=>t(q).title;var A=_t(),B=v(A),ot=v(B);m(B);var D=o(B,2);Y(D),m(A),I(()=>{w(ot,`Số câu ${nt()??""}:`),X(D,t(c)[s][J])}),K("blur",D,lt=>t(c)[s][J]=parseInt(lt.currentTarget.value)||0),H(p,A)}),pt(2),I(()=>w(_,t(a).title)),H(e,r)});var k=o(G,2),g=o(v(k),2);Y(g),m(k);var W=o(k,2);W.__click=at;var b=o(W,4);S(b);var M=o(b,4);S(M),m(F),I(e=>{w(it,V.stantodium),w(rt,mt.stantodium),C.disabled=!t(x),g.disabled=!t(x),X(g,t(h)),W.disabled=e,b.disabled=!t(l),M.disabled=!t(d)},[()=>t(h)<=0||t(c).some(e=>!e.length||e.some(a=>a===void 0||a<=0))]),L(j,()=>t(x),e=>n(x,e)),K("blur",g,e=>n(h,parseInt(e.currentTarget.value)||0,!0)),L(b,()=>t(l),e=>n(l,e)),L(M,()=>t(d),e=>n(d,e)),H(Z,z),ct()}ut(["click"]);export{Wt as component};
