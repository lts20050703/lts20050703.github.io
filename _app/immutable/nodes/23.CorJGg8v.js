import"../chunks/DsnmJJEf.js";import{z as lt,aj as ft,aL as ct,p as dt,h as g,i as U,f as K,a as V,s as d,d as h,t as j,g as t,b as F,c as pt,k as l,$ as mt,r as b,aM as G,n as vt}from"../chunks/fRTlKJc5.js";import{d as _t,h as xt,s as M,e as X}from"../chunks/ChByKK8l.js";import{e as Y,i as Z}from"../chunks/BTnqOMW6.js";import{a as tt,r as et}from"../chunks/BjZBy5iL.js";import{b as H}from"../chunks/D3jRnHxe.js";import{n as st,v as ht}from"../chunks/DVSrS0GQ.js";import{u as bt}from"../chunks/C6ltWnTA.js";const gt=[];function rt(e,f=!1,c=!1){return k(e,new Map,"",gt,null,c)}function k(e,f,c,p,v=null,i=!1){if(typeof e=="object"&&e!==null){var m=f.get(e);if(m!==void 0)return m;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(lt(e)){var r=Array(e.length);f.set(e,r),v!==null&&f.set(v,r);for(var _=0;_<e.length;_+=1){var S=e[_];_ in e&&(r[_]=k(S,f,c,p,null,i))}return r}if(ft(e)===ct){r={},f.set(e,r),v!==null&&f.set(v,r);for(var w in e)r[w]=k(e[w],f,c,p,null,i);return r}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function"&&!i)return k(e.toJSON(),f,c,p,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}var qt=(e,f,c)=>{f(t(c))},wt=K('<div class="flex flex-row items-center justify-center gap-1"><div> </div> <input class="input input-sm input-primary" type="text" inputmode="decimal"/></div>'),yt=K("<div> </div> <!> <hr/>",1),$t=K('<div class="text-center text-2xl font-bold"> </div> <div class="text-center"> </div> <div class="flex w-full flex-col items-center justify-center gap-1 p-1"><div>Đề</div> <textarea class="textarea textarea-primary w-full" cols="100" rows="10"></textarea> <button class="btn btn-primary btn-sm">Nhập đề</button> <!> <div class="flex flex-row items-center justify-center gap-1"><div>Số đề:</div> <input class="input input-sm input-primary" type="text" inputmode="decimal"/></div> <button class="btn btn-primary btn-sm">Tạo đề</button> <div>Đề</div> <textarea class="textarea textarea-primary w-full" cols="100" rows="10" readonly=""></textarea> <div>Đáp Án</div> <textarea class="textarea textarea-primary w-full" cols="100" rows="10" readonly=""></textarea></div>',1);function Dt(e,f){dt(f,!0);let c=g(0),p=g(U([])),v=g(""),i=g(""),m=g(""),r=g(U([]));function _(s){try{const a=s.split(`
`);l(p,[],!0),l(r,[],!0);for(const n of a){if(n.startsWith("##")){t(r).at(-1)?.questions.push({questions:[],title:n.slice(2)});continue}if(n.startsWith("#")){t(p).push([]),t(r).push({questions:[],title:n.slice(1)});continue}if(bt(n.toLowerCase()).startsWith("cau")){t(r).at(-1)?.questions.at(-1)?.questions.push({question:n.split(/ +/).slice(2).join(" "),answers:[]});continue}if(!n.trim().length)continue;const u=t(r).at(-1)?.questions.at(-1)?.questions.at(-1),o=u?.answers;!u||!o||(n.startsWith("*")?o.push({answer:n.split(/ +/).slice(1).join(" "),right:!0}):o.push({answer:n.split(/ +/).slice(1).join(" "),right:!1}))}return t(r)}catch{return[]}}function S(s){const a=Math.floor(Math.random()*s.length);return{index:a,element:s[a]}}function w(){l(i,""),l(m,"");const s=structuredClone(rt(t(r)));for(let a=0;a<t(c);a+=1){l(i,t(i)+`${a+1}	"`),l(m,t(m)+`Mã đề ${a+1}
`);let n=0;for(let u=0;u<t(p).length;u+=1)for(let o=0;o<t(p)[u].length;o+=1){n+=1,s[u].questions[o].questions.length||(s[u].questions[o].questions=structuredClone(rt(t(r))[u].questions[o].questions));const{element:q,index:L}=S(s[u].questions[o].questions);s[u].questions[o].questions.splice(L,1),l(i,t(i)+`Câu ${n}: ${q.question}
`);for(let x=0;x<q.answers.length;x+=1){const C=q.answers[x];l(i,t(i)+`${["A","B","C","D"][x]}. ${C.answer}
`),C.right&&l(m,t(m)+`${n}: ${["A","B","C","D"][x]}
`)}}l(i,t(i)+`"
`)}}var T=$t();xt(s=>{j(()=>mt.title=st.stantodium)});var W=V(T),nt=h(W,!0);b(W);var A=d(W,2),it=h(A,!0);b(A);var P=d(A,2),D=d(h(P),2);G(D);var N=d(D,2);N.__click=[qt,_,v];var Q=d(N,2);Y(Q,17,()=>t(r),Z,(s,a,n)=>{var u=yt(),o=V(u),q=h(o,!0);b(o);var L=d(o,2);Y(L,17,()=>t(a).questions,Z,(x,C,R)=>{let at=()=>t(C).title;var O=wt(),z=h(O),ot=h(z);b(z);var E=d(z,2);et(E),b(O),j(()=>{M(ot,`Số câu ${at()??""}:`),tt(E,t(p)[n][R])}),X("blur",E,ut=>t(p)[n][R]=parseInt(ut.currentTarget.value)||0),F(x,O)}),vt(2),j(()=>M(q,t(a).title)),F(s,u)});var B=d(Q,2),y=d(h(B),2);et(y),b(B);var I=d(B,2);I.__click=w;var $=d(I,4);G($);var J=d($,4);G(J),b(P),j(s=>{M(nt,st.stantodium),M(it,ht.stantodium),N.disabled=!t(v),y.disabled=!t(v),tt(y,t(c)),I.disabled=s,$.disabled=!t(i),J.disabled=!t(m)},[()=>t(c)<=0||t(p).some(s=>!s.length||s.some(a=>a===void 0||a<=0))]),H(D,()=>t(v),s=>l(v,s)),X("blur",y,s=>l(c,parseInt(s.currentTarget.value)||0,!0)),H($,()=>t(i),s=>l(i,s)),H(J,()=>t(m),s=>l(m,s)),F(e,T),pt()}_t(["click"]);export{Dt as component};
