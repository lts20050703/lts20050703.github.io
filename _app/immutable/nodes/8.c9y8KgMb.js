import"../chunks/DsnmJJEf.js";import{p as St,u as nt,e as ot,h as z,i as lt,g as t,j as B,k as b,f as g,s as l,d as e,b as v,c as Tt,t as A,r,l as U,a as C,n as At}from"../chunks/fRTlKJc5.js";import{d as Ut,e as Ct,s as G}from"../chunks/ChByKK8l.js";import{i as I}from"../chunks/BGNtTwbM.js";import{e as vt,i as ct}from"../chunks/BTnqOMW6.js";import{h as Rt}from"../chunks/DP9ndOMq.js";import{r as Dt,s as R}from"../chunks/BjZBy5iL.js";import{s as Mt}from"../chunks/CB-vSWM3.js";import{b as $t}from"../chunks/D3jRnHxe.js";import{c as Et,a as qt,b as zt,d as Bt}from"../chunks/BRpgosAh.js";import{_ as Gt}from"../chunks/EhTWFzFU.js";import{o as D,a as Ht,b as Jt,s as y,d as Kt,p as dt,l as Q,t as mt,n as Qt}from"../chunks/DLM6tR0h.js";var Vt=(P,m)=>{b(m,"1")},Wt=(P,m,x)=>{b(m,(t(x)-1).toString(),!0)},Xt=(P,m,x)=>{b(m,(t(x)+1).toString(),!0)},Yt=(P,m,x)=>{b(m,t(x).toString(),!0)},Zt=g('<div class="flex w-full items-center justify-center gap-3"><button class="btn btn-primary btn-sm w-10 p-0" aria-label="First page"><!></button> <button class="btn btn-primary btn-sm w-10 p-0" aria-label="Previous page"><!></button> <div class="flex flex-row items-center justify-center gap-1"><input type="text" inputmode="numeric"/> <div>/</div> <div class="w-14"> </div></div> <button class="btn btn-primary btn-sm w-10 p-0" aria-label="Next page"><!></button> <button class="btn btn-primary btn-sm w-10 p-0" aria-label="Last page"><!></button></div>'),ta=g('<div class="text-warning text-center">Invalid page number</div>'),aa=g('<div class="loading"></div> <div>Loading...</div>',1),ea=g('<div class="text-base-content/50 break-words break-all">Share of post: <a class="link link-primary"> </a></div>'),ra=g("<h2> </h2>"),sa=g("<img/>"),ia=g('<div class="w-256 max-w-full"><div class="join join-vertical bg-base-100 border-base-content/25 w-256 max-w-full rounded border"><div class="join-item flex flex-col gap-4 px-3 py-2"><div class="flex flex-row justify-between gap-4"><div class="flex flex-row gap-4"><b>Link</b> <div>@lts20050703</div> <div class="text-base-content/50"> </div></div> <a class="link link-primary">Original</a></div> <!></div> <div class="dark prose text-base-content join-item prose-a:link-primary prose-a:link prose-h2:text-base-content prose-h3:text-base-content bg-base-200 w-256 max-w-full px-3 py-2"><!> <!></div></div></div>'),na=g(`<div class="m-1 flex max-w-full flex-col items-center justify-center gap-4"><a class="link link-primary" href="/cohost/comments/">Link's Cohost Comments</a> <hr class="w-256 max-w-full opacity-25"/> <div>Link's Cohost Posts</div> <!> <!></div>`);function ga(P,m){St(m,!0);const x=a=>{var i=Zt(),n=e(i);n.__click=[Vt,w];var O=e(n);Et(O),r(n);var p=l(n,2);p.__click=[Wt,w,s];var f=e(p);qt(f),r(p);var u=l(p,2),k=e(u);Dt(k);var E=l(k,4),c=e(E,!0);r(E),r(u);var _=l(u,2);_.__click=[Xt,w,s];var q=e(_);zt(q),r(_);var h=l(_,2);h.__click=[Yt,w,F];var S=e(h);Bt(S),r(h),r(i),A(()=>{n.disabled=t(V),p.disabled=t(V),Mt(k,1,`input input-sm w-14 text-right ${t(X)?"input-error":"input-primary"}`),G(c,t(F)),_.disabled=t(W),h.disabled=t(W)}),Ct("focus",k,ft),$t(k,()=>t(w),T=>b(w,T)),v(a,i)};nt(()=>ot(()=>{pt()}));const _t=D({headline:y(),publishedAt:y(),shareOfPost:Jt(y()),blocks:Ht(Kt("type",[D({type:Q("attachment"),attachment:dt(D({kind:Q("image"),fileURL:y(),attachmentId:y(),altText:y(),width:Qt()}),mt(a=>({...a,fileName:encodeURI(a.fileURL.replace(`https://staging.cohostcdn.org/attachment/${a.attachmentId}`,""))})))}),D({type:Q("markdown"),markdown:D({content:dt(y(),mt(async a=>(await Gt(a))?.code))})})]))});let w=z("1"),s=B(()=>parseInt(t(w))),M=z(lt([])),F=z(0);const V=B(()=>isNaN(t(s))||t(s)<=1),W=B(()=>isNaN(t(s))||t(s)>=t(F)),X=B(()=>isNaN(t(s))||t(s)<1||t(s)>Math.max(t(F),1));let $=z(lt([]));nt(()=>{t(s),ot(Y)});async function pt(){b($,(await(await fetch("/cohost/posts.txt")).text()).split(`
`),!0),b(F,Math.ceil(t($).length/10),!0),Y()}async function Y(){if(!(isNaN(t(s))||t(s)<1)){b(M,[],!0);for(let a=(t(s)-1)*10;a<t(s)*10&&!(a>=t($).length);a+=1){const i=t($)[a];try{const n=await _t.parseAsync(await(await fetch(`/cohost/${i}/post.json`)).json());t(M).push({...n,slug:i})}catch(n){console.log(n)}}}}function Z(a,i="medium",n="en"){const O=new Date(a);return new Intl.DateTimeFormat(n,{dateStyle:i}).format(O)}function ft(){setTimeout(()=>this.selectionStart=this.selectionEnd=this.value.length)}var H=na(),tt=l(e(H),6);x(tt);var ut=l(tt,2);{var ht=a=>{var i=ta();v(a,i)},bt=a=>{var i=U(),n=C(i);{var O=f=>{var u=aa();At(2),v(f,u)},p=f=>{var u=U(),k=C(u);vt(k,17,()=>t(M),ct,(E,c)=>{var _=ia(),q=e(_),h=e(q),S=e(h),T=e(S),J=l(e(T),4),gt=e(J,!0);r(J),r(T);var xt=l(T,2);r(S);var wt=l(S,2);{var kt=d=>{var o=ea(),j=l(e(o)),rt=e(j,!0);r(j),r(o),A(()=>{R(j,"href",t(c).shareOfPost),G(rt,t(c).shareOfPost)}),v(d,o)};I(wt,d=>{t(c).shareOfPost&&d(kt)})}r(h);var at=l(h,2),et=e(at);{var yt=d=>{var o=ra(),j=e(o,!0);r(o),A(()=>G(j,t(c).headline)),v(d,o)};I(et,d=>{t(c).headline&&d(yt)})}var jt=l(et,2);vt(jt,17,()=>t(c).blocks,ct,(d,o,j,rt)=>{var st=U(),Nt=C(st);{var Lt=N=>{var L=sa();A(()=>{R(L,"src",`/cohost/${t(c).slug??""}/${t(o).attachment.fileName??""}`),R(L,"alt",t(o).attachment.altText)}),v(N,L)},It=N=>{var L=U(),Pt=C(L);{var Ft=K=>{var it=U(),Ot=C(it);Rt(Ot,()=>t(o).markdown.content),v(K,it)};I(Pt,K=>{t(o).type==="markdown"&&K(Ft)},!0)}v(N,L)};I(Nt,N=>{t(o).type==="attachment"?N(Lt):N(It,!1)})}v(d,st)}),r(at),r(q),r(_),A(d=>{R(J,"title",t(c).publishedAt),G(gt,d),R(xt,"href",`https://cohost.org/lts20050703/post/${t(c).slug??""}`)},[()=>Z(t(c).publishedAt)]),v(E,_)}),v(f,u)};I(n,f=>{t(M).length===0?f(O):f(p,!1)},!0)}v(a,i)};I(ut,a=>{t(X)?a(ht):a(bt,!1)})}return r(H),v(P,H),Tt({format_date:Z})}Ut(["click"]);export{ga as component};
