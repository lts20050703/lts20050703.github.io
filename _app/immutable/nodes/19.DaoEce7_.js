import"../chunks/DsnmJJEf.js";import{p as Oe,h as f,i as F,u as ie,e as oe,k as r,g as e,f as k,a as I,s,t as d,b as n,c as $e,$ as Ee,d as v,r as i,l as V,q as Je}from"../chunks/fRTlKJc5.js";import{d as Ne,h as qe,s as m,e as ne}from"../chunks/ChByKK8l.js";import{i as H}from"../chunks/BGNtTwbM.js";import{e as ve,i as Fe}from"../chunks/BTnqOMW6.js";import{r as O,s as W,a as He}from"../chunks/BjZBy5iL.js";import{s as Pe}from"../chunks/CB-vSWM3.js";import{s as ce}from"../chunks/B754rq1e.js";import{a as pe,b as ue}from"../chunks/D3jRnHxe.js";import{p as Xe}from"../chunks/D-MggKv_.js";import{n as fe,v as de}from"../chunks/DVSrS0GQ.js";import{L as Be}from"../chunks/DDyWFoCF.js";import{t as Y,T as De}from"../chunks/brOtyZDp.js";var Ge=(Z,$,A)=>{r($,e(A).map(()=>""),!0)},Ke=k(" <br/> ",1),Me=k('<input type="text" class="input input-info h-7 p-1" readonly=""/>'),Qe=k('<input type="text"/>'),Re=k('<div class="pointer-events-none fixed top-0 m-1 flex w-full items-center justify-center"><div class="bg-base-100 pointer-events-auto flex flex-col items-center gap-4 rounded-2xl p-1 sm:flex-row sm:rounded-full"><div class="flex flex-row items-center gap-1"> <input type="checkbox" class="toggle toggle-primary"/></div> <div class="flex flex-row items-center gap-1"> <input type="checkbox" class="toggle toggle-primary"/></div></div></div> <div class="m-1 mt-4 flex flex-col items-center justify-center gap-4"><div class="flex flex-col items-center justify-center gap-1"><div class="text-center text-2xl font-bold"> </div> <a class="link link-primary">Source</a></div> <button class="btn btn-error btn-sm">Clear Inputs</button> <div class="w-256 max-w-full leading-loose"></div></div> <!> <!>',1),Ue=k('<a class="link link-primary text-3xl" data-sveltekit-reload=""> </a>'),Ve=k('<div class="mt-4 flex flex-col items-center justify-center gap-4"><div class="text-3xl">Custom TXT Files</div> <input class="input input-primary" type="text" placeholder="Link to the txt file..."/> <a class="link link-primary text-3xl" data-sveltekit-reload="">Load</a> <hr class="my-4 w-96 max-w-full"/> <div class="text-3xl">Examples</div> <div class="flex flex-col items-center justify-center gap-1"></div></div>'),We=k('<div class="text-center text-2xl font-bold"> </div> <div class="text-center"> </div> <!>',1);function pt(Z,$){Oe($,!0);let A=!1,_=f(null),b=f(F([])),h=f(F([])),w=f(!1),P=f(F(fe.openclozes)),E=f(!1),J=f("loading"),x=f(F([])),X=f("");ie(()=>{oe(()=>{r(_,Xe.url.searchParams.get("link"),!0),r(w,localStorage.getItem("openclozes.live")!==null),e(_)&&fetch(e(_)).then(o=>o.text()).then(o=>{r(b,o.split(`
`),!0),r(P,e(b).shift()??"",!0),r(b,e(b).join(`
`).split(/{|}/),!0),r(h,e(b).filter((a,p)=>p%2===1),!0);const c=localStorage.getItem(`openclozes-${e(_)}`);if(!c){r(J,"loaded"),r(x,Array.from({length:e(h).length},()=>""),!0);return}try{const a=JSON.parse(c);typeof a=="object"&&a&&"inputs"in a&&Array.isArray(a.inputs)&&a.inputs.every(p=>typeof p=="string")&&r(x,a.inputs,!0),r(J,"loaded")}catch{r(J,"error")}Y("Loaded save!","success",3e3)})})}),ie(()=>{localStorage.setItem(`openclozes-${e(_)}`,JSON.stringify({inputs:e(x),version:de.openclozes})),e(w)?localStorage.setItem("openclozes.live","true"):localStorage.removeItem("openclozes.live"),oe(()=>{A||Y("Autosaved!","success",1e3)})});function me(){localStorage.removeItem(`openclozes-${e(_)}`),location.reload()}function _e(){setTimeout(()=>{this.selectionStart=this.selectionEnd=this.value.length},0),A=!0}function xe(){A=!1,Y("Autosaved!","success",1e3)}var ee=We();qe(o=>{d(()=>Ee.title=e(P))});var B=I(ee),ge=v(B,!0);i(B);var D=s(B,2),he=v(D,!0);i(D);var ye=s(D,2);{var ke=o=>{var c=Re(),a=I(c),p=v(a),S=v(p),g=v(S),L=s(g);O(L),i(S);var y=s(S,2),N=v(y),te=s(N);O(te),i(y),i(p),i(a);var G=s(a,2),K=v(G),M=v(K),we=v(M,!0);i(M);var Se=s(M,2);i(K);var ae=s(K,2);ae.__click=[Ge,x,h];var se=s(ae,2);ve(se,21,()=>e(b),Fe,(T,q,u)=>{var le=V(),je=I(le);{var Ie=z=>{var C=V(),Q=I(C);{var R=l=>{var t=Ke(),j=I(t),Le=s(j,2);d((Te,Ce)=>{m(j,`${Te??""} `),m(Le,` ${Ce??""}`)},[()=>e(q).split(`
`)[0],()=>e(q).split(`
`)[1]]),n(l,t)},U=l=>{var t=Je();d(()=>m(t,e(q))),n(l,t)};H(Q,l=>{e(q).includes(`
`)?l(R):l(U,!1)})}n(z,C)},Ae=z=>{var C=V(),Q=I(C);{var R=l=>{var t=Me();O(t),d(()=>{ce(t,`width: ${e(h)[(u-1)/2]?.length+2}ch`),He(t,e(h)[(u-1)/2])}),n(l,t)},U=l=>{var t=Qe();O(t),d(j=>{Pe(t,1,`input h-7 p-1 lowercase ${j??""}`),ce(t,`width: ${e(h)[(u-1)/2]?.length+2}ch`)},[()=>!e(x)[(u-1)/2]||!e(w)?"input-primary":e(x)[(u-1)/2]?.toLowerCase().split(/ +/).join(" ").trim()===e(h)[(u-1)/2]?"input-success":"input-error"]),ne("focus",t,_e),ne("blur",t,xe),ue(t,()=>e(x)[(u-1)/2],j=>e(x)[(u-1)/2]=j),n(l,t)};H(Q,l=>{e(E)?l(R):l(U,!1)},!0)}n(z,C)};H(je,z=>{u%2===0?z(Ie):z(Ae,!1)})}n(T,le)}),i(se),i(G);var re=s(G,2);De(re,{});var ze=s(re,2);Be(ze,{get status(){return e(J)},clear_save:me}),d(()=>{m(g,`Check: ${e(w)?"On":"Off"} `),m(N,`Answers: ${e(E)?"Show":"Hide"} `),m(we,e(P)),W(Se,"href",e(_))}),pe(L,()=>e(w),T=>r(w,T)),pe(te,()=>e(E),T=>r(E,T)),n(o,c)},be=o=>{var c=Ve(),a=s(v(c),2);O(a);var p=s(a,2),S=s(p,6);ve(S,20,()=>$.data.files,g=>g,(g,L)=>{var y=Ue(),N=v(y,!0);i(y),d(()=>{W(y,"href",`./?link=${L.url??""}`),m(N,L.title)}),n(g,y)}),i(S),i(c),d(()=>W(p,"href",`./?link=${e(X)??""}`)),ue(a,()=>e(X),g=>r(X,g)),n(o,c)};H(ye,o=>{e(_)?o(ke):o(be,!1)})}d(()=>{m(ge,fe.openclozes),m(he,de.openclozes)}),n(Z,ee),$e()}Ne(["click"]);export{pt as component};
