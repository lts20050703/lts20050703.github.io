import{f as k,a as m,c as oe}from"../chunks/BAhx-X9G.js";import{p as pe,f as h,c as r,r as a,s as e,t as I,g as n,h as Y,a as be,u as le,b as de,i as B,d as ie}from"../chunks/DpYMcOls.js";import{d as ge,s as f,e as ve}from"../chunks/DO8qiAfh.js";import{i as C}from"../chunks/A2GgpgHd.js";import{r as ne,s as U,d as Le,n as ce,v as De}from"../chunks/BaETQRMq.js";import{b as He,c as _e}from"../chunks/qtjqsBgj.js";import{r as Ae}from"../chunks/D91BBqEj.js";import{H as Ie}from"../chunks/D8CBjT4n.js";import{L as Se}from"../chunks/DKergPPz.js";import{t as ze,T as Ne}from"../chunks/CSkIyDrm.js";import{n as ye,b as xe,s,c as we,d as he,f as Te,i as v,h as Ee,x as Ge,l as Me,g as Oe,A as Ze,a as qe,e as Be,p as Ce,j as ue}from"../chunks/rKBdwL6f.js";import{N as Fe,D as Je}from"../chunks/Bm207Gx7.js";import{e as Ke}from"../chunks/CelAGHVR.js";import{a as me,d as Pe,f as Qe,b as Re}from"../chunks/f-IhlLTy.js";import{s as fe}from"../chunks/Bk5HspoW.js";import{a as Ue}from"../chunks/DT0IpB15.js";var Ve=k('<div class="col-span-full grid grid-cols-subgrid gap-1"><div class="h-6 w-6"><!></div> <input type="text"/> <button class="btn px-1 btn-sm btn-error"><!></button></div>'),We=k('<div class="grid grid-cols-[auto_1fr_auto] items-center justify-center gap-1 rounded border border-primary p-1"><div></div> <div class="text-center"> </div> <div></div> <section class="col-span-full grid grid-cols-subgrid gap-1"></section></div>'),Xe=k('<button class="btn btn-sm btn-error"> </button> <hr class="my-2 w-full opacity-25"/> <div> </div> <!> <hr class="my-2 w-full opacity-25"/> <!> <hr class="my-2 w-full opacity-25"/> <div class="text-center text-3xl"> </div> <!> <!> <button class="btn btn-primary"> </button>',1);function Ye($,ee){pe(ee,!0);const F=300,S=Y(()=>s.players.some(c=>s.players.some(y=>c.id!==y.id&&c.name===y.name))),z=Y(()=>s.players.some(c=>!c.name));var N=Xe(),M=h(N);M.__click=function(...c){ye?.apply(this,c)};var te=r(M,!0);a(M);var T=e(M,4),V=r(T,!0);a(T);var O=e(T,2);xe(O);var W=e(O,4);{var J=c=>{var y=We(),q=e(r(y),2),re=r(q,!0);a(q);var E=e(q,4);Ke(E,31,()=>s.players,t=>t.id,(t,o,p)=>{var g=Ve(),x=r(g),_=r(x);Ee(_),a(x),me(x,l=>Pe?.(l));var i=e(x,2);ne(i);var d=e(i,2);d.__click=()=>{const l=s.players.indexOf(n(o));l!==-1&&s.players.splice(l,1)};var j=r(d);Ge(j),a(d),a(g),I(l=>{fe(i,1,`input input-sm ${l??""}`),U(i,"placeholder",`${v.player_name??""}...`),d.disabled=s.players.length<=2,U(d,"aria-label",v.remove_player)},[()=>!n(o).name||s.players.some((l,b)=>b!==n(p)&&l.name===n(o).name)?"input-warning":"input-primary"]),He(i,()=>n(o).name,l=>n(o).name=l),Ue(g,()=>Qe,()=>({duration:F})),m(t,g)}),a(E),me(E,(t,o)=>Re?.(t,o),()=>({items:s.players,flipDurationMs:F,transformDraggedElement:t=>{t?.classList.remove("grid-cols-subgrid"),t?.classList.add("grid","grid-cols-[auto_1fr_auto]")}})),a(y),I(()=>f(re,v.player_name)),ve("consider",E,t=>{s.players=t.detail.items}),ve("finalize",E,t=>{s.players=t.detail.items}),m(c,y)};C(W,c=>{s.players.length&&c(J)})}var K=e(W,4),P=r(K,!0);a(K);var Q=e(K,2);we(Q);var X=e(Q,2);he(X);var Z=e(X,2);Z.__click=()=>{s.time="night",s.night===0?Te():s.current_role?s.time="night":s.time="day"};var ae=r(Z,!0);a(Z),I(()=>{f(te,v.new_game),fe(T,1,`text-3xl ${n(S)||n(z)?"text-warning":"text-success"}`),f(V,v.players),f(P,v.roles),Z.disabled=n(S)||n(z),f(ae,v.start)}),m($,N),be()}ge(["click"]);var $e=k('<button class="btn btn-sm"> </button> <!> <hr class="my-2 w-full opacity-25"/> <div class="tabs-lift tabs w-full"><input type="radio" name="section" class="tab border-b-0! [--tab-border-color:--color-base-content]"/> <div class="tab-content border-base-content bg-base-100 p-4"><div class="flex flex-col items-center justify-center gap-1"><!> <hr class="my-2 w-full opacity-25"/> <!> <hr class="my-2 w-full opacity-25"/> <!></div></div> <input type="radio" name="section" class="tab border-b-0! [--tab-border-color:--color-base-content]"/> <div class="tab-content border-base-content bg-base-100 p-4"><div class="flex flex-col items-center justify-center gap-1"><!></div></div></div> <!> <!>',1),et=k("<!> <!>",1),tt=k('<div class="flex w-full flex-row justify-between"><button class="btn btn-sm"> </button> <button class="btn btn-sm"> </button></div> <!>',1),at=k('<div class="flex w-full flex-row justify-between"><button class="btn btn-sm"> </button> <button class="btn btn-sm"> </button></div> <!>',1),rt=k(`<div class="fixed bottom-4 z-50 flex w-full flex-col items-center justify-center gap-1 p-1 text-center"><div>If Link ask you to export save state (or you know how to manually update the save file to the
			latest version), click the link below</div> <a class="link link-primary underline-offset-8">Go to debug page</a></div>`),st=k('<!> <div class="text-center text-2xl font-bold"> </div> <div class="text-center"> </div> <div class="m-1 mb-12 flex items-center justify-center"><div class="flex w-full max-w-sm flex-col items-center justify-center gap-1"><!></div></div> <!> <!> <!> <!>',1);function wt($,ee){pe(ee,!0);const F=[];let S=ie(!1),z=ie("loading"),N=ie("players");const M=Y(()=>s.players.some(t=>s.players.some(o=>t.id!==o.id&&t.name===o.name))),te=Y(()=>s.players.some(t=>!t.name));le(()=>de(()=>{B(z,Me(localStorage.getItem("werewolf-moderator")),!0)})),le(()=>{n(z)==="loaded"&&(localStorage.setItem("werewolf-moderator",Oe(s)),de(()=>ze("Autosaved!","success",1e3)))});var T=st(),V=h(T);Ie(V,{get title(){return ce["werewolf-moderator"]},get description(){return Le["werewolf-moderator"]},uri:"werewolf-moderator"});var O=e(V,2),W=r(O,!0);a(O);var J=e(O,2),K=r(J,!0);a(J);var P=e(J,2),Q=r(P),X=r(Q);{var Z=t=>{var o=$e(),p=h(o);p.__click=()=>{B(S,!1)};var g=r(p,!0);a(p);var x=e(p,2);qe(x);var _=e(x,4),i=r(_);ne(i),i.value=i.__value="players";var d=e(i,2),j=r(d),l=r(j);xe(l);var b=e(l,4);Be(b);var G=e(b,4);Ce(G),a(j),a(d);var u=e(d,2);ne(u),u.value=u.__value="roles";var w=e(u,2),L=r(w),D=r(L);we(D),a(L),a(w),a(_);var H=e(_,2);he(H);var A=e(H,2);ue(A),I(()=>{p.disabled=n(M)||n(te),f(g,v.back),U(i,"aria-label",v.players),U(u,"aria-label",v.roles)}),_e(F,[],i,()=>n(N),R=>B(N,R)),_e(F,[],u,()=>n(N),R=>B(N,R)),m(t,o)},ae=t=>{var o=oe(),p=h(o);{var g=_=>{var i=et(),d=h(i);Ye(d,{});var j=e(d,2);ue(j),m(_,i)},x=_=>{var i=oe(),d=h(i);{var j=b=>{var G=tt(),u=h(G),w=r(u);w.__click=()=>{s.time="setup"};var L=r(w,!0);a(w);var D=e(w,2);D.__click=()=>{B(S,!0)};var H=r(D,!0);a(D),a(u);var A=e(u,2);Fe(A,{}),I(()=>{f(L,v.setup),f(H,v.advanced_settings)}),m(b,G)},l=b=>{var G=oe(),u=h(G);{var w=L=>{var D=at(),H=h(D),A=r(H);A.__click=()=>{s.time="setup"};var R=r(A,!0);a(A);var se=e(A,2);se.__click=()=>{B(S,!0)};var ke=r(se,!0);a(se),a(H);var je=e(H,2);Je(je,{}),I(()=>{f(R,v.setup),f(ke,v.advanced_settings)}),m(L,D)};C(u,L=>{s.time==="day"&&L(w)},!0)}m(b,G)};C(d,b=>{s.time==="night"?b(j):b(l,!1)},!0)}m(_,i)};C(p,_=>{s.time==="setup"?_(g):_(x,!1)},!0)}m(t,o)};C(X,t=>{n(S)?t(Z):t(ae,!1)})}a(Q),a(P);var c=e(P,2);Ne(c,{});var y=e(c,2);Ze(y,{});var q=e(y,2);Se(q,{get status(){return n(z)},get clear_save(){return ye}});var re=e(q,2);{var E=t=>{var o=rt(),p=e(r(o),2);a(o),I(g=>U(p,"href",g),[()=>Ae("/werewolf-moderator/debug/")]),m(t,o)};C(re,t=>{n(z)==="error"&&t(E)})}I(()=>{f(W,ce["werewolf-moderator"]),f(K,De["werewolf-moderator"])}),m($,T),be()}ge(["click"]);export{wt as component};
