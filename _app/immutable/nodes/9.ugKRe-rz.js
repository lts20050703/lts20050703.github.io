import{f as b,s as x,a as v,c as G}from"../chunks/D8wh7IZ2.js";import{p as ft,u as J,b as K,d,e as Q,g as t,h as m,f as D,s as i,c as a,t as S,a as pt,r,n as _t}from"../chunks/B-LFg-4H.js";import{i as U}from"../chunks/D76fYp6N.js";import{e as ut,i as gt}from"../chunks/CdB643C7.js";import{h as xt}from"../chunks/WudhANCC.js";import{d as ht,n as H,s as h}from"../chunks/Dyp-6SpP.js";import{r as bt}from"../chunks/utBHSPsn.js";import{H as wt}from"../chunks/Dy9b70qy.js";import{P as yt}from"../chunks/BOImH5fj.js";import{_ as kt}from"../chunks/20QYacRS.js";import{o as jt,b as Tt,s as f,p as At,t as Ft}from"../chunks/DzmSLd3x.js";var It=b('<div class="text-center text-warning">Invalid page number</div>'),Rt=b('<div class="loading"></div> <div>Loading...</div>',1),Dt=b('<div class="w-5xl max-w-full"><div class="join-vertical join w-5xl max-w-full rounded border border-base-content/25 bg-base-200"><div class="join-item flex flex-col px-3 py-2"><div class="flex flex-row justify-between gap-4"><div class="flex flex-row gap-4"><b>Link</b> <div>@lts20050703</div> <div class="text-base-content/50"> </div></div> <a class="link link-primary underline-offset-8">Original</a></div> <div class="text-base-content/50">Replying to <a class="link link-primary underline-offset-8"> </a></div></div> <div class="dark join-item prose w-5xl max-w-full bg-base-300 px-3 py-2 text-base-content prose-h2:text-base-content prose-h3:text-base-content prose-a:link prose-a:link-primary prose-a:underline-offset-8"><!></div></div></div>'),Ht=b('<!> <div class="m-1 flex max-w-full flex-col items-center justify-center gap-4"><a class="link link-primary underline-offset-8"> </a> <hr class="w-5xl max-w-full opacity-25"/> <div> </div> <!> <!></div>',1);function Gt(V,W){ft(W,!0),J(()=>K(()=>{Z()}));const X=jt({commentId:f(),postedAt:f(),body:At(f(),Ft(async e=>(await kt(e))?.code)),post:f(),inReplyTo:Tt(f())});let Y="1",n=d(1),p=d(Q([])),L=d(0),w=d(!1),_=d(Q([]));J(()=>{t(n),K(N)});async function Z(){m(_,(await(await fetch("/cohost/comments.txt")).text()).split(`
`),!0),m(L,Math.ceil(t(_).length/10),!0),N()}async function N(){if(!(isNaN(t(n))||t(n)<1)){m(p,[],!0);for(let e=(t(n)-1)*10;e<t(n)*10&&!(e>=t(_).length);e+=1){const s=t(_)[e];try{const l=await X.parseAsync(await(await fetch(`/cohost/comments/${s}.json`)).json());t(p).push({...l,slug:s})}catch(l){console.log(l)}}}}function P(e,s="medium",l="en"){const k=new Date(e);return new Intl.DateTimeFormat(l,{dateStyle:s}).format(k)}var tt={format_date:P},M=Ht(),O=D(M);wt(O,{get title(){return H.cohost_comments},get description(){return ht.cohost_comments},uri:"cohost/comments"});var $=i(O,2),u=a($),et=a(u,!0);r(u);var y=i(u,4),at=a(y,!0);r(y);var q=i(y,2);yt(q,{raw_page:Y,get max_page(){return t(L)},get page(){return t(n)},set page(e){m(n,e,!0)},get invalid_page(){return t(w)},set invalid_page(e){m(w,e,!0)}});var rt=i(q,2);{var st=e=>{var s=It();v(e,s)},ot=e=>{var s=G(),l=D(s);{var k=c=>{var g=Rt();_t(2),v(c,g)},z=c=>{var g=G(),it=D(g);ut(it,17,()=>t(p),gt,(nt,o)=>{var j=Dt(),B=a(j),T=a(B),A=a(T),F=a(A),I=i(a(F),4),lt=a(I,!0);r(I),r(F);var ct=i(F,2);r(A);var C=i(A,2),R=i(a(C)),vt=a(R,!0);r(R),r(C),r(T);var E=i(T,2),dt=a(E);xt(dt,()=>t(o).body),r(E),r(B),r(j),S(mt=>{h(I,"title",t(o).postedAt),x(lt,mt),h(ct,"href",`${t(o).post??""}#comment-${t(o).commentId??""}`),h(R,"href",t(o).inReplyTo||t(o).post),x(vt,t(o).inReplyTo||t(o).post)},[()=>P(t(o).postedAt)]),v(nt,j)}),v(c,g)};U(l,c=>{t(p).length===0?c(k):c(z,!1)},!0)}v(e,s)};U(rt,e=>{t(w)?e(st):e(ot,!1)})}return r($),S(e=>{h(u,"href",e),x(et,H.cohost_posts),x(at,H.cohost_comments)},[()=>bt("/cohost/")]),v(V,M),pt(tt)}export{Gt as component};
