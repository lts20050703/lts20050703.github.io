import{d as Ut,f as x,s as m,e as qt,a as p,c as bt}from"../chunks/CGGH4L5V.js";import{p as zt,e as Bt,u as _t,b as ft,i as c,d as $,f as L,s,c as i,t as g,g as r,a as Ft,r as o,h as Y,j as Gt}from"../chunks/CfxMfjxc.js";import{e as Z}from"../chunks/RmWROPmH.js";import{i as H}from"../chunks/BRGDtGkj.js";import{d as Mt,n as gt,v as Pt,r as J,s as xt}from"../chunks/DyvSR6in.js";import{s as S}from"../chunks/C1H3qzzB.js";import{b as tt,a as Qt}from"../chunks/CiSmga37.js";import{b as ht}from"../chunks/BBoo_Gsu.js";import{H as Rt}from"../chunks/DeHQiGEq.js";import{L as Vt}from"../chunks/BYqHPS2n.js";import{t as kt,T as Wt}from"../chunks/BJBDMyXZ.js";import{o as Yt,a as O,s as Zt,c as te,n as ee}from"../chunks/DzmSLd3x.js";var re=x('<div class="text-error"> </div>'),ae=x('<div class="text-success"> </div>'),se=x("<div> </div>"),oe=x('<input class="checkbox checkbox-primary sm:checkbox-lg" type="checkbox"/> <label class="text-xl sm:text-3xl"> </label>',1),ie=x("<div><!></div>"),ne=x("<div> </div>"),le=x('<!> <div class="text-center text-2xl font-bold"> </div> <div class="text-center"> </div> <!> <!> <div class="m-1 flex flex-col items-center justify-center gap-1"><label for="input" class="text-3xl">Nhập 5 số</label> <input type="text" inputmode="decimal" class="input input-sm w-48 max-w-full px-1 pt-0 text-right text-3xl input-primary"/> <button>Thêm hàng</button> <div class="flex flex-row gap-1"><label for="number" class="text-3xl">Số</label> <input id="number" type="text" inputmode="numeric" class="input input-sm w-16 px-1 pt-0 text-right text-3xl input-primary"/></div> <div class="flex flex-row gap-1"><button>Thêm</button> <button> </button></div> <!> <div>Danh sách những số đã gọi:</div> <div class="flex flex-row items-center justify-center gap-1"></div> <div> </div> <div class="grid w-full grid-cols-9"></div> <div class="flex flex-row items-center justify-center gap-1"><div class="text-3xl">Kiểm tra</div> <input type="text" inputmode="numeric" class="input input-sm w-16 px-1 pt-0 text-right text-3xl input-primary"/></div> <!> <div class="flex flex-row gap-1"><button class="btn btn-sm btn-warning">Xóa số đã gọi</button> <button class="btn btn-sm btn-error">Xóa hết số</button></div></div>',1);function ke(yt,wt){zt(wt,!0);const $t=Yt({numbers:O(O(ee())),checked:O(te()),logs:O(Zt())}),e=Bt({numbers:[],checked:[],logs:[]});let X=0,A,C,d=$(""),h=$(""),k=$(""),I=$(""),j=$("loading");_t(()=>{ft(()=>{X=2;const t=localStorage.getItem("loto");if(!t)c(j,"loaded");else try{const a=$t.parse(JSON.parse(t));e.numbers=a.numbers,e.checked=a.checked,e.logs=a.logs,c(j,"loaded")}catch{c(j,"error")}kt("Loaded save!","success",3e3)})}),_t(()=>{localStorage.setItem("loto",JSON.stringify(e)),ft(()=>{if(X>0){X-=1;return}kt("Autosaved!","success",1e3)})});function et(t){r(d)===""||t instanceof KeyboardEvent&&t.key!=="Enter"||(e.logs.includes(r(d))?c(I,r(d),!0):(c(I,""),e.logs.unshift(r(d)),e.checked[Number.parseInt(r(d))]=!0),c(d,""),C.focus())}function rt(t){r(h)===""||t instanceof KeyboardEvent&&t.key!=="Enter"||(e.numbers.push(r(h).split(",").map(a=>Number.parseInt(a))),c(h,""),A.focus())}function St(){setTimeout(()=>{this.selectionStart=this.selectionEnd=this.value.length},0)}function It(){localStorage.removeItem("loto"),location.reload()}var at=le(),st=L(at);Rt(st,{get title(){return gt.loto},get description(){return Mt.loto},uri:"loto"});var D=s(st,2),jt=i(D,!0);o(D);var U=s(D,2),Et=i(U,!0);o(U);var ot=s(U,2);Wt(ot);var it=s(ot,2);Vt(it,{get status(){return r(j)},clear_save:It});var nt=s(it,2),y=s(i(nt),2);J(y),y.__keydown=rt,ht(y,t=>A=t,()=>A);var q=s(y,2);q.__click=rt;var z=s(q,2),w=s(i(z),2);J(w),w.__keydown=et,ht(w,t=>C=t,()=>C),o(z);var B=s(z,2),F=i(B);F.__click=et;var E=s(F,2);E.__click=()=>{e.checked[parseInt(e.logs[0])]=!1,e.logs.shift(),e.logs=e.logs};var Nt=i(E);o(E),o(B);var lt=s(B,2);{var Tt=t=>{var a=bt(),n=L(a);{var _=v=>{var b=re(),N=i(b);o(b),g(()=>m(N,`Số ${r(I)??""} đã được thêm vào trước đó!`)),p(v,b)},f=v=>{var b=ae(),N=i(b);o(b),g(()=>m(N,`Đã thêm số ${e.logs[0]??""}!`)),p(v,b)};H(n,v=>{r(I)?v(_):v(f,!1)})}p(t,a)};H(lt,t=>{e.logs[0]&&t(Tt)})}var G=s(lt,4);Z(G,20,()=>e.logs,t=>t,(t,a)=>{var n=se(),_=i(n,!0);o(n),g(()=>m(_,a)),p(t,n)}),o(G);var M=s(G,2),Kt=i(M);o(M);var P=s(M,2);Z(P,20,()=>e.numbers,t=>t,(t,a)=>{var n=bt(),_=L(n);Z(_,16,()=>[[1,9],[10,19],[20,29],[30,39],[40,49],[50,59],[60,69],[70,79],[80,90]],([f,v])=>f,(f,v,b,N)=>{var mt=Y(()=>Gt(v,2));let Jt=()=>r(mt)[0],Ot=()=>r(mt)[1];const u=Y(()=>a.find(l=>Jt()<=l&&l<=Ot())),R=Y(()=>a.filter(l=>e.checked[l]).length);var T=ie(),Xt=i(T);{var At=l=>{var pt=oe(),K=L(pt);J(K);var V=s(K,2),Ct=i(V,!0);o(V),g((W,Dt)=>{xt(K,"id",W),xt(V,"for",Dt),m(Ct,r(u))},[()=>r(u).toString(),()=>r(u).toString()]),Qt(K,()=>e.checked[r(u)],W=>e.checked[r(u)]=W),p(l,pt)};H(Xt,l=>{r(u)&&l(At)})}o(T),g(l=>S(T,1,`flex flex-col items-center justify-center gap-1 p-1 md:flex-row ${l??""} ${r(u)!==void 0?r(R)===5?"bg-primary":e.checked[r(u)]?"":r(R)===4?"bg-yellow-500":r(R)===3?"bg-opacity-50 bg-yellow-500":"":""}`),[()=>parseInt(e.logs[0])===r(u)?"border border-primary":"border border-base-100"]),p(f,T)}),p(t,n)}),o(P);var Q=s(P,2),ct=s(i(Q),2);J(ct),o(Q);var dt=s(Q,2);{var Lt=t=>{var a=ne(),n=i(a);o(a),g((_,f)=>{S(a,1,`rounded p-1 text-3xl ${_??""} text-black`),m(n,`${f??""}
			${r(k)??""}`)},[()=>e.checked[parseInt(r(k))]?"bg-success":"bg-error",()=>e.checked[parseInt(r(k))]?"Có":"Không có"]),p(t,a)};H(dt,t=>{r(k)&&t(Lt)})}var vt=s(dt,2),ut=i(vt);ut.__click=()=>{e.checked=[],e.logs=[]};var Ht=s(ut,2);Ht.__click=()=>{e.numbers=[],e.checked=[],e.logs=[]},o(vt),o(nt),g(t=>{m(jt,gt.loto),m(Et,Pt.loto),S(q,1,`btn btn-sm btn-primary ${r(h)===""?"btn-disabled":""}`),S(F,1,`btn btn-sm btn-primary ${r(d)===""?"btn-disabled":""}`),S(E,1,`btn btn-sm btn-error ${e.logs[0]?"":"btn-disabled"}`),m(Nt,`Undo ${e.logs[0]??""??""}`),m(Kt,`cơ hội thắng: ${t??""}%`)},[()=>100*e.numbers.map(t=>(1/(90-e.numbers.map(a=>a.filter(n=>e.checked[n])).flat().length))**(5-t.filter(a=>e.checked[a]).length)).reduce((t,a)=>t+a,0)]),tt(y,()=>r(h),t=>c(h,t)),qt("focus",w,St),tt(w,()=>r(d),t=>c(d,t)),tt(ct,()=>r(k),t=>c(k,t)),p(yt,at),Ft()}Ut(["keydown","click"]);export{ke as component};
