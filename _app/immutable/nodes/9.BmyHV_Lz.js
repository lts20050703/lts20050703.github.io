import"../chunks/DsnmJJEf.js";import{p as vt,u as Q,e as U,h as R,i as V,g as t,j as S,k as u,f as T,s as n,d as e,b as h,c as dt,t as W,r as i,l as X,a as Y,n as mt}from"../chunks/fRTlKJc5.js";import{d as pt,e as _t,s as P}from"../chunks/ChByKK8l.js";import{i as Z}from"../chunks/BGNtTwbM.js";import{e as ut,i as ft}from"../chunks/BTnqOMW6.js";import{h as bt}from"../chunks/DP9ndOMq.js";import{r as gt,s as E}from"../chunks/BjZBy5iL.js";import{s as ht}from"../chunks/CB-vSWM3.js";import{b as xt}from"../chunks/D3jRnHxe.js";import{c as wt,a as yt,b as kt,d as jt}from"../chunks/BRpgosAh.js";import{_ as Nt}from"../chunks/EhTWFzFU.js";import{o as Tt,b as Ft,s as N,p as It,t as Lt}from"../chunks/DLM6tR0h.js";var At=(x,c)=>{u(c,"1")},Rt=(x,c,f)=>{u(c,(t(f)-1).toString(),!0)},St=(x,c,f)=>{u(c,(t(f)+1).toString(),!0)},Ct=(x,c,f)=>{u(c,t(f).toString(),!0)},Dt=T('<div class="flex w-full items-center justify-center gap-3"><button class="btn btn-primary btn-sm w-10 p-0" aria-label="First page"><!></button> <button class="btn btn-primary btn-sm w-10 p-0" aria-label="Previous page"><!></button> <div class="flex flex-row items-center justify-center gap-1"><input type="text" inputmode="numeric"/> <div>/</div> <div class="w-14"> </div></div> <button class="btn btn-primary btn-sm w-10 p-0" aria-label="Next page"><!></button> <button class="btn btn-primary btn-sm w-10 p-0" aria-label="Last page"><!></button></div>'),Mt=T('<div class="text-warning text-center">Invalid page number</div>'),Pt=T('<div class="loading"></div> <div>Loading...</div>',1),Et=T('<div class="w-256 max-w-full"><div class="join join-vertical bg-base-200 border-base-content/25 w-256 max-w-full rounded border"><div class="join-item flex flex-col px-3 py-2"><div class="flex flex-row justify-between gap-4"><div class="flex flex-row gap-4"><b>Link</b> <div>@lts20050703</div> <div class="text-base-content/50"> </div></div> <a class="link link-primary">Original</a></div> <div class="text-base-content/50">Replying to <a class="link link-primary"> </a></div></div> <div class="dark prose text-base-content join-item prose-a:link-primary prose-a:link prose-h2:text-base-content prose-h3:text-base-content bg-base-300 w-256 max-w-full px-3 py-2"><!></div></div></div>'),Ot=T(`<div class="m-1 flex max-w-full flex-col items-center justify-center gap-4"><a class="link link-primary" href="/cohost/">Link's Cohost Posts</a> <hr class="w-256 max-w-full opacity-25"/> <div>Link's Cohost Comments</div> <!> <!></div>`);function Yt(x,c){vt(c,!0);const f=a=>{var r=Dt(),o=e(r);o.__click=[At,b];var y=e(o);wt(y),i(o);var d=n(o,2);d.__click=[Rt,b,s];var m=e(d);yt(m),i(d);var p=n(d,2),g=e(p);gt(g);var L=n(g,4),l=e(L,!0);i(L),i(p);var v=n(p,2);v.__click=[St,b,s];var A=e(v);kt(A),i(v);var _=n(v,2);_.__click=[Ct,b,w];var k=e(_);jt(k),i(_),i(r),W(()=>{o.disabled=t(O),d.disabled=t(O),ht(g,1,`input input-sm w-14 text-right ${t(z)?"input-error":"input-primary"}`),P(l,t(w)),v.disabled=t(q),_.disabled=t(q)}),_t("focus",g,at),xt(g,()=>t(b),j=>u(b,j)),h(a,r)};Q(()=>U(()=>{tt()}));const $=Tt({commentId:N(),postedAt:N(),body:It(N(),Lt(async a=>(await Nt(a))?.code)),post:N(),inReplyTo:Ft(N())});let b=R("1"),s=S(()=>parseInt(t(b))),F=R(V([])),w=R(0);const O=S(()=>isNaN(t(s))||t(s)<=1),q=S(()=>isNaN(t(s))||t(s)>=t(w)),z=S(()=>isNaN(t(s))||t(s)<1||t(s)>Math.max(t(w),1));let I=R(V([]));Q(()=>{t(s),U(B)});async function tt(){u(I,(await(await fetch("/cohost/comments.txt")).text()).split(`
`),!0),u(w,Math.ceil(t(I).length/10),!0),B()}async function B(){if(!(isNaN(t(s))||t(s)<1)){u(F,[],!0);for(let a=(t(s)-1)*10;a<t(s)*10&&!(a>=t(I).length);a+=1){const r=t(I)[a];try{const o=await $.parseAsync(await(await fetch(`/cohost/comments/${r}.json`)).json());t(F).push({...o,slug:r})}catch(o){console.log(o)}}}}function G(a,r="medium",o="en"){const y=new Date(a);return new Intl.DateTimeFormat(o,{dateStyle:r}).format(y)}function at(){setTimeout(()=>this.selectionStart=this.selectionEnd=this.value.length)}var C=Ot(),H=n(e(C),6);f(H);var et=n(H,2);{var it=a=>{var r=Mt();h(a,r)},st=a=>{var r=X(),o=Y(r);{var y=m=>{var p=Pt();mt(2),h(m,p)},d=m=>{var p=X(),g=Y(p);ut(g,17,()=>t(F),ft,(L,l)=>{var v=Et(),A=e(v),_=e(A),k=e(_),j=e(k),D=n(e(j),4),rt=e(D,!0);i(D),i(j);var ot=n(j,2);i(k);var J=n(k,2),M=n(e(J)),nt=e(M,!0);i(M),i(J),i(_);var K=n(_,2),lt=e(K);bt(lt,()=>t(l).body),i(K),i(A),i(v),W(ct=>{E(D,"title",t(l).postedAt),P(rt,ct),E(ot,"href",`${t(l).post??""}#comment-${t(l).commentId??""}`),E(M,"href",t(l).inReplyTo||t(l).post),P(nt,t(l).inReplyTo||t(l).post)},[()=>G(t(l).postedAt)]),h(L,v)}),h(m,p)};Z(o,m=>{t(F).length===0?m(y):m(d,!1)},!0)}h(a,r)};Z(et,a=>{t(z)?a(it):a(st,!1)})}return i(C),h(x,C),dt({format_date:G})}pt(["click"]);export{Yt as component};
