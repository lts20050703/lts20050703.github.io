import"../chunks/DsnmJJEf.js";import{p as W,i as K,u as v,e as w,k as h,h as A,o as Y,f as z,a as B,s as p,d as y,t as C,b as J,c as q,g as I,$ as F,r as _,aM as S}from"../chunks/fRTlKJc5.js";import{h as R,e as E,s as $}from"../chunks/ChByKK8l.js";import{a as D}from"../chunks/BjZBy5iL.js";import{b as Q}from"../chunks/D3jRnHxe.js";import{b as X}from"../chunks/BX2B2b48.js";import{n as j,v as Z}from"../chunks/DVSrS0GQ.js";import{L as ee}from"../chunks/DDyWFoCF.js";import{t as H,T as te}from"../chunks/brOtyZDp.js";import{u as ie}from"../chunks/C6ltWnTA.js";function ne(t){const s=t.split(/ +/).filter(Boolean);let i="",e="",n=!0;for(const a of s)(se(a)||M(a)||re(a))&&(n=!1),n?i+=`${a} `:e+=`${a} `;return{author:i.trim(),title:e.trim()}}function ae(t){return oe(t).toUpperCase()}function oe(t){const{title:s}=ne(t),i=[];for(const c of s.toLowerCase().split(" "))!c||M(c)||["&","-",",","(","["].includes(c)||i.push(...c.split(/ |-|&|,|\(|\[/).filter(Boolean));let e=i.shift(),n=i.shift()?.[0]??"";if(!e)return"";const a=pe[e];if(a&&(e=a),e.includes(" ")){const c=e.split(" ");e=c.shift(),n=c.shift()?.[0]??""}if(!e)return"";const o=me[e];if(o)return o+n;let r="";if(e.startsWith("qu"))r=V(e,n,2)??"";else for(let c=0;c<e.length&&(r=V(e,n,c)??"",!r);c+=1);return ce(r,1,7)||(r=G(e,n),r||(r=G(ie(e),n))),r}function G(t,s){let i="";for(let e=0;e<t.length&&!i;e+=1)for(let n=t.length;n>e;n-=1){const a=g[t.slice(e,n)];if(a){if(e>3)continue;e===0?i+=t[0]:i+=t.slice(0,e),i+=a+s;break}}return i||(i=t[0]+"000"+s),i}function V(t,s,i){let e=g[t.slice(i)];if(e)return t.slice(0,Math.max(i,1))+e+s;let n=t;for(const[a,o]of Object.entries(ue))n=n.replaceAll(a,o);if(e=g[n.slice(i)],e)return n.slice(0,Math.max(i,1))+e+s;for(const[a,o]of Object.entries(le))n=n.replaceAll(a,o);if(e=g[n.slice(i)],e)return n.slice(0,Math.max(i,1))+e+s}function M(t){return!Number.isNaN(Number.parseInt(t))}function se(t){return t.toUpperCase()!==t}function re(t){return["SAT","IELTS","KEY","CAE","KET","FCE","PET","CPE","GRE","AP","C"].includes(t)}function ce(t,s,i){return s<=t.length&&t.length<=i}const g={a:"100",ac:"101",ach:"102",ai:"103",am:"104",an:"105",ang:"106",anh:"107",ao:"108",ap:"109",at:"110",au:"111",ay:"112",ăc:"113",ăm:"114",ăn:"115",ăng:"116",áp:"117",ăt:"118",âc:"119",âm:"120",ân:"121",âng:"122",âp:"123",ât:"124",âu:"125",ây:"126",e:"200",ec:"201",em:"202",en:"203",eng:"204",eo:"205",ep:"206",et:"207",ê:"250",êc:"251",êch:"252",êm:"253",ên:"254",êng:"255",ênh:"256",êp:"257",êt:"258",êu:"259",i:"300",ia:"301",ich:"302",iec:"303",iêm:"304",iên:"305",iêng:"306",iêp:"307",iêt:"308",iêu:"309",im:"310",in:"311",inh:"312",ip:"313",it:"314",iu:"315",o:"400",oa:"401",oac:"402",oach:"403",oai:"404",oam:"405",oan:"406",oang:"407",oanh:"408",oao:"409",oap:"410",oat:"411",oay:"412",oăc:"413",oăm:"414",oăn:"415",oăng:"416",oăp:"417",oăt:"418",oc:"419",oe:"420",oec:"421",oem:"422",oen:"423",oeng:"424",oeo:"425",oep:"426",oet:"427",oi:"428",om:"429",on:"430",ong:"431",ooc:"432",oong:"433",op:"434",ot:"435",ô:"450",ôc:"451",ôi:"452",ôm:"453",ôn:"454",ông:"455",ôông:"456",ôp:"457",ôt:"458",ơ:"460",ơc:"461",ơi:"462",ơm:"463",ơn:"464",ơng:"465",ơp:"466",ơt:"467",u:"500",ua:"501",uân:"502",uâng:"503",uât:"504",uây:"505",uc:"506",uê:"507",uêch:"508",uênh:"509",ui:"510",um:"511",un:"512",ung:"513",uôc:"514",uôi:"515",uôm:"516",uôn:"517",uông:"518",uôt:"519",uơ:"520",up:"521",ut:"523",uy:"524",uya:"525",uyêch:"526",uyên:"527",uyêt:"528",uym:"529",uyn:"530",uynh:"531",uyp:"532",uyt:"533",ư:"550",ưa:"551",ưc:"552",ưi:"553",ưm:"554",ưn:"555",ưng:"556",ươc:"557",ươi:"558",ươm:"559",ươn:"560",ương:"561",ươp:"562",ươt:"563",ươu:"564",ưt:"565",ưu:"566",y:"600",ych:"601",yêm:"602",yên:"603",yêng:"604",yêt:"605",yêu:"606",ym:"607",yn:"608",ynh:"609",yp:"610"},ue={á:"a",à:"a",ả:"a",ã:"a",ạ:"a",ắ:"ă",ằ:"ă",ẳ:"ă",ẵ:"ă",ặ:"ă",ấ:"â",ầ:"â",ẩ:"â",ẫ:"â",ậ:"â",é:"e",è:"e",ẻ:"e",ẽ:"e",ẹ:"e",ế:"ê",ề:"ê",ể:"ê",ễ:"ê",ệ:"ê",í:"i",ì:"i",ỉ:"i",ĩ:"i",ị:"i",ó:"o",ò:"o",ỏ:"o",õ:"o",ọ:"o",ố:"ô",ồ:"ô",ổ:"ô",ỗ:"ô",ộ:"ô",ớ:"ơ",ờ:"ơ",ở:"ơ",ỡ:"ơ",ợ:"ơ",ú:"u",ù:"u",ủ:"u",ũ:"u",ụ:"u",ứ:"ư",ừ:"ư",ử:"ư",ữ:"ư",ự:"ư",ý:"y",ỳ:"y",ỷ:"y",ỹ:"y",ỵ:"y"},le={ă:"a",â:"a",đ:"d",ê:"e",ô:"o",ơ:"o",ư:"u"},me={gi:"gi300",gim:"gi310",gin:"gi311",ginh:"gi312",gip:"gi313",git:"gi314"},pe={mr:"mister",ms:"miss",mrs:"mistress",dr:"doctor",www:"World Wide Web"};var he=z(`<div class="text-center text-2xl font-bold"> </div> <div class="text-center"> </div> <!> <!> <div class="my-4 flex flex-col items-center justify-center gap-1"><div class="text-warning">Sách Tiếng Việt phải nhập tên sách có dấu!</div> <div class="text-warning">TÊN TÁC GIẢ PHẢI VIẾT HOA HẾT!</div> <div class="text-warning">Tên Sách Không Được Viết Hoa Hết!</div> <div>App sẽ dựa vào từ có viết hoa hết hay không để nhận biết là từ đó là tên tác giả hay tên sách</div> <div>Ví dụ: "NGUYỄN VĂN A Tôi đã làm gì sai?" thì app sẽ hiểu tên tác giả là "NGUYỄN VĂN A", tên sách
		là "Tôi đã làm gì sai?"</div></div> <div class="m-1 grid grid-cols-[1fr_16rem] items-center justify-center gap-1"><div>TÊN TÁC GIẢ Tên sách (mỗi dòng 1 TÊN TÁC GIẢ Tên sách)</div> <div>Mã hóa sách (mỗi dòng 1 sách)</div> <textarea class="textarea textarea-primary resize-none svelte-1wmyo3p" cols="100" rows="1"></textarea> <textarea class="textarea textarea-primary h-full resize-none svelte-1wmyo3p" readonly="" cols="100" rows="1"></textarea></div>`,1);function ke(t,s){W(s,!0);const i=K({input:""});let e=A(""),n=0,a=!1,o,r=A("loading");v(()=>{w(async()=>{n=2;const u=localStorage.getItem("nang-khieu-library-encode");if(!u)h(r,"loaded");else try{const m=JSON.parse(u);typeof m=="object"&&m&&"input"in m&&typeof m.input=="string"&&(m.input=m.input,await Y(),o.style.height="",o.style.height=`${o.scrollHeight+1}px`),h(r,"loaded");return}catch{h(r,"error")}})}),v(()=>{localStorage.setItem("nang-khieu-library-encode",JSON.stringify(i)),w(()=>{if(!a){if(n>0){n-=1;return}H("Autosaved!","success",1e3)}})}),v(()=>{h(e,i.input.split(`
`).map(u=>ae(u)).join(`
`),!0),o.style.height="",o.style.height=`${o.scrollHeight+1}px`});function c(){localStorage.removeItem("nang-khieu-library-encode"),location.reload()}function O(){a=!0}function L(){a=!1,H("Autosaved!","success",1e3)}var b=he();R(u=>{C(()=>F.title=j["nang-khieu-library"])});var f=B(b),P=y(f,!0);_(f);var d=p(f,2),U=y(d,!0);_(d);var x=p(d,2);te(x,{});var T=p(x,2);ee(T,{get status(){return I(r)},clear_save:c});var N=p(T,4),l=p(y(N),4);S(l),X(l,u=>o=u,()=>o);var k=p(l,2);S(k),_(N),C(()=>{$(P,j["nang-khieu-library"]),$(U,Z["nang-khieu-library"]),D(k,I(e))}),E("focus",l,O),E("blur",l,L),Q(l,()=>i.input,u=>i.input=u),J(t,b),q()}export{ke as component};
