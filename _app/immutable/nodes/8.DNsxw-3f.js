import{f,s as b,a as i,c as y}from"../chunks/B2b87GhG.js";import{p as Ra,u as ea,b as ra,d as k,e as sa,g as a,h as j,f as u,s as l,c as r,t as P,a as $a,r as s,n as Da}from"../chunks/TpzrCHlF.js";import{i as x}from"../chunks/B5m3e9lQ.js";import{e as ia,i as oa}from"../chunks/C0FbLxM4.js";import{h as Ha}from"../chunks/Jn4cAOW5.js";import{d as Ma,n as q,s as w}from"../chunks/CfM2uD-D.js";import{r as Sa}from"../chunks/D8tm07nc.js";import{H as qa}from"../chunks/DOGAwEOS.js";import{P as za}from"../chunks/Cx4ShbX2.js";import{_ as Ba}from"../chunks/Czg_Kne8.js";import{o as I,a as Ca,d as Ea,p as na,l as z,t as la,n as Ga,s as m,b as Ja}from"../chunks/DzmSLd3x.js";var Ka=f('<div class="text-center text-warning">Invalid page number</div>'),Qa=f('<div class="loading"></div> <div>Loading...</div>',1),Va=f('<div class="wrap-break-word break-all text-base-content/50">Share of post: <a class="link link-primary underline-offset-8"> </a></div>'),Wa=f("<h2> </h2>"),Xa=f("<img/>"),Ya=f('<div class="w-5xl max-w-full"><div class="join-vertical join w-5xl max-w-full rounded border border-base-content/25 bg-base-100"><div class="join-item flex flex-col gap-4 px-3 py-2"><div class="flex flex-row justify-between gap-4"><div class="flex flex-row gap-4"><b>Link</b> <div>@lts20050703</div> <div class="text-base-content/50"> </div></div> <a class="link link-primary underline-offset-8">Original</a></div> <!></div> <div class="dark join-item prose w-5xl max-w-full bg-base-200 px-3 py-2 text-base-content prose-h2:text-base-content prose-h3:text-base-content prose-a:link prose-a:link-primary prose-a:underline-offset-8"><!> <!></div></div></div>'),Za=f('<!> <div class="m-1 flex max-w-full flex-col items-center justify-center gap-4"><a class="link link-primary underline-offset-8"> </a> <hr class="w-5xl max-w-full opacity-25"/> <div> </div> <!> <!></div>',1);function ct(va,da){Ra(da,!0),ea(()=>ra(()=>{fa()}));const ca=I({headline:m(),publishedAt:m(),shareOfPost:Ja(m()),blocks:Ca(Ea("type",[I({type:z("attachment"),attachment:na(I({kind:z("image"),fileURL:m(),attachmentId:m(),altText:m(),width:Ga()}),la(t=>({...t,fileName:encodeURI(t.fileURL.replace(`https://staging.cohostcdn.org/attachment/${t.attachmentId}`,""))})))}),I({type:z("markdown"),markdown:I({content:na(m(),la(async t=>(await Ba(t))?.code))})})]))});let ma="1",d=k(1),O=k(sa([])),B=k(0),N=k(!1),A=k(sa([]));ea(()=>{a(d),ra(C)});async function fa(){j(A,(await(await fetch("/cohost/posts.txt")).text()).split(`
`),!0),j(B,Math.ceil(a(A).length/10),!0),C()}async function C(){if(!(isNaN(a(d))||a(d)<1)){j(O,[],!0);for(let t=(a(d)-1)*10;t<a(d)*10&&!(t>=a(A).length);t+=1){const v=a(A)[t];try{const c=await ca.parseAsync(await(await fetch(`/cohost/${v}/post.json`)).json());a(O).push({...c,slug:v})}catch(c){console.log(c)}}}}function E(t,v="medium",c="en"){const U=new Date(t);return new Intl.DateTimeFormat(c,{dateStyle:v}).format(U)}var pa={format_date:E},G=Za(),J=u(G);qa(J,{get title(){return q.cohost_posts},get description(){return Ma.cohost_posts},uri:"cohost"});var K=l(J,2),F=r(K),ha=r(F,!0);s(F);var T=l(F,4),_a=r(T,!0);s(T);var Q=l(T,2);za(Q,{raw_page:ma,get max_page(){return a(B)},get page(){return a(d)},set page(t){j(d,t,!0)},get invalid_page(){return a(N)},set invalid_page(t){j(N,t,!0)}});var ga=l(Q,2);{var ua=t=>{var v=Ka();i(t,v)},xa=t=>{var v=y(),c=u(v);{var U=p=>{var L=Qa();Da(2),i(p,L)},V=p=>{var L=y(),wa=u(L);ia(wa,17,()=>a(O),oa,(ba,n)=>{var R=Ya(),W=r(R),$=r(W),D=r($),H=r(D),M=l(r(H),4),ya=r(M,!0);s(M),s(H);var ka=l(H,2);s(D);var ja=l(D,2);{var Pa=o=>{var e=Va(),h=l(r(e)),Z=r(h,!0);s(h),s(e),P(()=>{w(h,"href",a(n).shareOfPost),b(Z,a(n).shareOfPost)}),i(o,e)};x(ja,o=>{a(n).shareOfPost&&o(Pa)})}s($);var X=l($,2),Y=r(X);{var Ia=o=>{var e=Wa(),h=r(e,!0);s(e),P(()=>b(h,a(n).headline)),i(o,e)};x(Y,o=>{a(n).headline&&o(Ia)})}var Oa=l(Y,2);ia(Oa,17,()=>a(n).blocks,oa,(o,e,h,Z)=>{var aa=y(),Aa=u(aa);{var Fa=_=>{var g=Xa();P(()=>{w(g,"src",`/cohost/${a(n).slug??""}/${a(e).attachment.fileName??""}`),w(g,"alt",a(e).attachment.altText)}),i(_,g)},La=_=>{var g=y(),Na=u(g);{var Ta=S=>{var ta=y(),Ua=u(ta);Ha(Ua,()=>a(e).markdown.content),i(S,ta)};x(Na,S=>{a(e).type==="markdown"&&S(Ta)},!0)}i(_,g)};x(Aa,_=>{a(e).type==="attachment"?_(Fa):_(La,!1)})}i(o,aa)}),s(X),s(W),s(R),P(o=>{w(M,"title",a(n).publishedAt),b(ya,o),w(ka,"href",`https://cohost.org/lts20050703/post/${a(n).slug??""}`)},[()=>E(a(n).publishedAt)]),i(ba,R)}),i(p,L)};x(c,p=>{a(O).length===0?p(U):p(V,!1)},!0)}i(t,v)};x(ga,t=>{a(N)?t(ua):t(xa,!1)})}return s(K),P(t=>{w(F,"href",t),b(ha,q.cohost_comments),b(_a,q.cohost_posts)},[()=>Sa("/cohost/comments/")]),i(va,G),$a(pa)}export{ct as component};
