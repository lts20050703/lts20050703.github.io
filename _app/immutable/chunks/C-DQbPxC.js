import{B as t,C as s,l as x,b as S,Z as i,A as b,E as C,H as A,I as g,_ as m}from"./CdrH6FGe.js";function B(e,c,l=c){var d=new WeakSet;t(e,"input",async r=>{var f=r?e.defaultValue:e.value;if(f=u(e)?k(f):f,l(f),s!==null&&d.add(s),await x(),f!==(f=c())){var v=e.selectionStart,o=e.selectionEnd,_=e.value.length;if(e.value=f??"",o!==null){var a=e.value.length;v===o&&o===_&&a>_?(e.selectionStart=a,e.selectionEnd=a):(e.selectionStart=v,e.selectionEnd=Math.min(o,a))}}}),(b&&e.defaultValue!==e.value||S(c)==null&&e.value)&&(l(u(e)?k(e.value):e.value),s!==null&&d.add(s)),i(()=>{var r=c();if(e===document.activeElement){var f=C??s;if(d.has(f))return}u(e)&&r===k(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}const n=new Set;function V(e,c,l,d,r=d){var f=l.getAttribute("type")==="checkbox",v=e;let o=!1;if(c!==null)for(var _ of c)v=v[_]??=[];v.push(l),t(l,"change",()=>{var a=l.__value;f&&(a=y(v,a,l.checked)),r(a)},()=>r(f?[]:null)),i(()=>{var a=d();if(b&&l.defaultChecked!==l.checked){o=!0;return}f?(a=a||[],l.checked=a.includes(l.__value)):l.checked=A(l.__value,a)}),g(()=>{var a=v.indexOf(l);a!==-1&&v.splice(a,1)}),n.has(v)||(n.add(v),m(()=>{v.sort((a,h)=>a.compareDocumentPosition(h)===4?-1:1),n.delete(v)})),m(()=>{if(o){var a;if(f)a=y(v,a,l.checked);else{var h=v.find(E=>E.checked);a=h?.__value}r(a)}})}function q(e,c,l=c){t(e,"change",d=>{var r=d?e.defaultChecked:e.checked;l(r)}),(b&&e.defaultChecked!==e.checked||S(c)==null)&&l(e.checked),i(()=>{var d=c();e.checked=!!d})}function y(e,c,l){for(var d=new Set,r=0;r<e.length;r+=1)e[r].checked&&d.add(e[r].__value);return l||d.delete(c),Array.from(d)}function u(e){var c=e.type;return c==="number"||c==="range"}function k(e){return e===""?null:+e}export{q as a,B as b,V as c};
